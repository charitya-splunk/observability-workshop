<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.125.5"><meta name=generator content="Relearn 6.0.0+tip"><meta name=description content="1. Introduction As we have seen in the previous chapter, once you have enabled Zero Config Auto Instrumentation and started to run invocations though your application, traces will be send to Splunk Observability Cloud Suite With these Traces we Splunk will automatically generate Dependency maps and RED Metrics. In this next section we are going to examine the traces itself and what information they provide to help you understand the behaviour of your services all without touching your code."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Splunk APM features available with Zero Config Auto-Instrumentation :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="1. Introduction As we have seen in the previous chapter, once you have enabled Zero Config Auto Instrumentation and started to run invocations though your application, traces will be send to Splunk Observability Cloud Suite With these Traces we Splunk will automatically generate Dependency maps and RED Metrics. In this next section we are going to examine the traces itself and what information they provide to help you understand the behaviour of your services all without touching your code."><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Splunk APM features available with Zero Config Auto-Instrumentation :: Splunk Observability Cloud Workshops"><meta property="og:description" content="1. Introduction As we have seen in the previous chapter, once you have enabled Zero Config Auto Instrumentation and started to run invocations though your application, traces will be send to Splunk Observability Cloud Suite With these Traces we Splunk will automatically generate Dependency maps and RED Metrics. In this next section we are going to examine the traces itself and what information they provide to help you understand the behaviour of your services all without touching your code."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="Ninja Workshops"><meta property="article:modified_time" content="2024-05-17T16:28:10+02:00"><meta itemprop=name content="Splunk APM features available with Zero Config Auto-Instrumentation :: Splunk Observability Cloud Workshops"><meta itemprop=description content="1. Introduction As we have seen in the previous chapter, once you have enabled Zero Config Auto Instrumentation and started to run invocations though your application, traces will be send to Splunk Observability Cloud Suite With these Traces we Splunk will automatically generate Dependency maps and RED Metrics. In this next section we are going to examine the traces itself and what information they provide to help you understand the behaviour of your services all without touching your code."><meta itemprop=dateModified content="2024-05-17T16:28:10+02:00"><meta itemprop=wordCount content="682"><title>Splunk APM features available with Zero Config Auto-Instrumentation :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/index.html rel=canonical type=text/html title="Splunk APM features available with Zero Config Auto-Instrumentation :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v5.63/images/favicon.ico?1718817962 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v5.63/css/fontawesome-all.min.css?1718817977 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.63/css/fontawesome-all.min.css?1718817977 rel=stylesheet></noscript><link href=/observability-workshop/v5.63/css/nucleus.css?1718817977 rel=stylesheet><link href=/observability-workshop/v5.63/css/auto-complete.css?1718817977 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.63/css/auto-complete.css?1718817977 rel=stylesheet></noscript><link href=/observability-workshop/v5.63/css/perfect-scrollbar.min.css?1718817977 rel=stylesheet><link href=/observability-workshop/v5.63/css/fonts.css?1718817977 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.63/css/fonts.css?1718817977 rel=stylesheet></noscript><link href=/observability-workshop/v5.63/css/theme.css?1718817977 rel=stylesheet><link href=/observability-workshop/v5.63/css/theme-splunk-light.css?1718817977 rel=stylesheet id=R-variant-style><link href=/observability-workshop/v5.63/css/chroma-relearn-light.css?1718817977 rel=stylesheet id=R-variant-chroma-style><link href=/observability-workshop/v5.63/css/variant.css?1718817977 rel=stylesheet><link href=/observability-workshop/v5.63/css/print.css?1718817977 rel=stylesheet media=print><link href=/observability-workshop/v5.63/css/format-print.css?1718817977 rel=stylesheet><script src=/observability-workshop/v5.63/js/variant.js?1718817977></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../../../..",window.relearn.relBaseUri="../../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v5.63",window.index_js_url="/observability-workshop/v5.63/en/index.search.js",window.variants&&variants.init(["splunk-light","splunk-dark"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"eu0",rumAccessToken:"TR9BBfgYo7qJfqrfgqjoqA",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({app:"observability-workshop",realm:"eu0",rumAccessToken:"TR9BBfgYo7qJfqrfgqjoqA"})</script></script><style>:root{--MAIN-WIDTH-MAX:1000rem;--MENU-WIDTH-L:23rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.63/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.63/en/other/index.html><span itemprop=name>Ninja Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.63/en/other/3-auto-instrumentation/index.html><span itemprop=name>Auto-Instrumentation Workshops</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/index.html><span itemprop=name>PetClinic Java Microservices Workshop (Kubernetes)</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>40. Splunk APM Features</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/30-auto-instrumentation/index.html title="Setting up Zero configuration Auto instrumentation for APM (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/50-profiling-db-query/index.html title="Splunk APM Always-on Profiling & Database Query Performance (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=splunk-apm-features-available-with-zero-config-auto-instrumentation>Splunk APM features available with Zero Config Auto-Instrumentation</h1><h2 id=1-introduction>1. Introduction</h2><p>As we have seen in the previous chapter, once you have enabled Zero Config Auto Instrumentation and started to run invocations though your application, traces will be send to <strong>Splunk Observability Cloud Suite</strong>
With these Traces we Splunk will automatically generate Dependency maps and RED Metrics. In this next section we are going to examine the traces itself and what information they provide to help you understand the behaviour of your services all without touching your code.</p><p>Make sure you are in the APM Explore page either by going back in the browser or navigate to the <strong>APM</strong> <a href=#R-image-de652387f42335baea0af342f6dd9e67 class=lightbox-link><img alt=APM class="noborder inline lazy lightbox noshadow figure-image" loading=lazy src="/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/apm-icon.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-de652387f42335baea0af342f6dd9e67><img alt=APM class="noborder inline lazy lightbox noshadow lightbox-image" loading=lazy src="/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/apm-icon.png?classes=inline&height=25px"></a> section in the Menu bar, then click on the <strong>Explore</strong> tile.</p><h2 id=2-examine-a-trace-from-the-apm-dependency-map>2. Examine a Trace from the APM Dependency map</h2><p>For this exercise we are going to use a common scenario you would use if the service operation was showing high latency, or errors for example.</p><p>Select the <strong>Customer Service</strong> in the Dependency map <strong>(1)</strong>, then make sure the <code>customers-service</code> is selected in the <strong>Services</strong> dropdown box <strong>(2)</strong>. Next, select <code>GET /Owners</code> from the Operations Drop down <strong>(3)</strong>.</p><p><a href=#R-image-00b685ff6e843c16eb54205a6b6a343a class=lightbox-link><img alt="select a trace" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/select-workflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-00b685ff6e843c16eb54205a6b6a343a><img alt="select a trace" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/select-workflow.png></a></p><p>This should give you the workflow with A filter on <code>GET /owners</code> <strong>(1)</strong> as shown below. To pick a trace, select a line in the <code>Service Requests & Errors</code> chart <strong>(2)</strong>, when the dot appear click to get a list of sample traces:</p><p><a href=#R-image-3ba7210ff9d7924bd7471922d19e5308 class=lightbox-link><img alt=workflow-trace-pick class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/selecting-a-trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3ba7210ff9d7924bd7471922d19e5308><img alt=workflow-trace-pick class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/selecting-a-trace.png></a></p><p>Once you have the list of sample traces, Clicking on the blue <strong>(3)</strong> Trace ID Link. (Make sure it has at thesame three services mentioned in the Service Column.)</p><p>This bring us the the Trace selected in the Waterfall view:</p><p><a href=#R-image-78f82d1cabb45ee6b02258756b54980e class=lightbox-link><img alt=waterfall class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/waterfall-view.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-78f82d1cabb45ee6b02258756b54980e><img alt=waterfall class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/waterfall-view.png></a></p><p>Here we find several sections:</p><ul><li>The actual Waterfall Pane <strong>(1)</strong>, where you see the trace and all the instrumented functions visible as spans, with their duration representation and order/relationship showing.</li><li>The Trace Info Pane <strong>(2)</strong>, by default it is showing the selected Span information. (Highlighted with a box around the Span in the Waterfall Pane.)</li><li>The Span Pane <strong>(3)</strong>, here you can find all the Tags that have been send in the selected Span, You can scroll down to see all of them.</li><li>The process Pane, with tags related to the process that created the Span (Scroll down to see as it is not in the screenshot.)</li><li>The Trace Properties at the top of the right hand pane, default it is collapsed as shown.</li></ul><p>First lets examine a Span:</p><h2 id=3-spans-and-zero-config-auto-instrumentation-features>3. Spans and Zero Config Auto-Instrumentation features</h2><p>While we examine our spans, lets look at a number features that you get out of the box without code modifications when using Zero config Auto-Instrumentation on top of tracing:</p><p>Due to tha fact there are several different routes
First, in the Waterfall Pane, make sure the <code>customers-service:SELECT petclinic.owners</code> or similar span is selected as shown in the screenshot below:</p><p><a href=#R-image-eaced4b45b0c4c6607328180e1371e5f class=lightbox-link><img alt=db-query class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/db-query.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eaced4b45b0c4c6607328180e1371e5f><img alt=db-query class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.63/en/other/3-auto-instrumentation/3-java-microservices-k8s/40-traces-spans-tags/../images/db-query.png></a></p><ul><li>The basic latency information showing as a bar for the instrumented function or call, in our example, it took 6.3 Milliseconds.</li><li>Number of similar Spans <strong>(1)</strong>, only visible if a the span is repeated multiple time. In this case there are 10 repeats in our example. (You can show/hide them all by clicking on the <code>10x</code> and all span will show in order)</li><li>Inferred Services, Calls done to external systems that are not instrumented, show up as a gray &lsquo;inferred&rsquo; span. The Inferred Service or span in our case here is a call to the Mysql Database <code>mysql:petclinic SELECT petclinic</code> <strong>(2)</strong> as shown below our selected span.</li><li>Span Tags in the Tag Pane, Standard tags produced by the auto instrumentation agent. In this case the span is calling a Database, so it includes the <code>db.statement</code> tag <strong>(3)</strong>. This tag will hold the DB query statement and is used by the Database call performed during this span. This will be used by the DB-Query Performance feature. We look at DB-Query Performance in the next section.</li><li>Always-on Profiling, <strong>IF</strong> the system is configured to, and has captured Profiling data during a Spans life cycle, it will show the number of Call Stacks captured in the Spans time line. (15 Call Stacks for the <code>customers-service:SELECT petclinic.owners</code> Span show above). We will look at Profiling in the next section.</li></ul><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>Maciej Lisowski</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>May 17, 2024</span></span></footer></article></div></main></div><script src=/observability-workshop/v5.63/js/clipboard.min.js?1718817977 defer></script><script src=/observability-workshop/v5.63/js/perfect-scrollbar.min.js?1718817977 defer></script><script src=/observability-workshop/v5.63/js/theme.js?1718817977 defer></script></body></html>