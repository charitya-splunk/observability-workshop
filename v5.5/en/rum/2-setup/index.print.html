<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 5.22.1+tip"><meta name=description content="Splunk Observability Workshops"><title>2. Example of RUM enablement in your Website :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v5.5/en/rum/2-setup/index.html rel=canonical type=text/html title="2. Example of RUM enablement in your Website :: Splunk Observability Cloud Workshops"><link href=../../../en/rum/2-setup/index.xml rel=alternate type=application/rss+xml title="2. Example of RUM enablement in your Website :: Splunk Observability Cloud Workshops"><link href=../../../images/favicon.ico?1696414010 rel=icon type=image/x-icon sizes=any><link href=../../../css/fontawesome-all.min.css?1696414014 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fontawesome-all.min.css?1696414014 rel=stylesheet></noscript><link href=../../../css/nucleus.css?1696414014 rel=stylesheet><link href=../../../css/auto-complete.css?1696414014 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/auto-complete.css?1696414014 rel=stylesheet></noscript><link href=../../../css/perfect-scrollbar.min.css?1696414014 rel=stylesheet><link href=../../../css/fonts.css?1696414014 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fonts.css?1696414014 rel=stylesheet></noscript><link href=../../../css/theme.css?1696414014 rel=stylesheet><link href=../../../css/theme-splunk-light.css?1696414014 rel=stylesheet id=R-variant-style><link href=../../../css/variant.css?1696414014 rel=stylesheet><link href=../../../css/print.css?1696414014 rel=stylesheet media=print><link href=../../../css/format-print.css?1696414014 rel=stylesheet><link href=../../../css/ie.css?1696414014 rel=stylesheet><script src=../../../js/url.js?1696414014></script>
<script src=../../../js/variant.js?1696414014></script>
<script>window.index_js_url="../../../en/index.search.js";var root_url="../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_Reset_view="Reset view",window.T_View_reset="View reset!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://splunk.github.io/observability-workshop/v5.5/",window.variants&&variants.init(["splunk-light","splunk-dark","aws"])</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script>
<script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script>
<script>SplunkRum.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rum",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g",app:"observability-workshop",version:"1",environment:"observability-workshop-env"}),SplunkSessionRecorder.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rumreplay",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g"})</script><style>@media screen and (min-width:1300px){#body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1300px;width:100%}}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../en/rum/2-setup/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)">
<i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../en/rum/index.html><span itemprop=name>Splunk RUM</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>2. Example of RUM enablement in your Website</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=2-example-of-rum-enablement-in-your-website>2. Example of RUM enablement in your Website</h1><ul><li>Check the original HEAD section of your Online-boutique webpage (or use the examples here) in your browser</li><li>Find the Web address of your workshop hosts Online Boutique</li><li>Compare the changes made to the hosts Online-Boutique and compare with the base one.</li></ul><hr><h2 id=1-browse-to-the-online-boutique>1. Browse to the Online Boutique</h2><p>If you have access to an EC2 instance and have previously installed the Online Boutique as part of the APM session, you can view it on port 81 of the EC2 instance&rsquo;s IP address.</p><p>If you have not got access to an EC2 instance with the Online Boutique installed then your workshop instructor will provide you with the Online Boutique URL that does not have RUM installed so that you can complete the next steps.</p><p>Open your web browser and go to the Online Boutique. (The one you previously used, or the one provided by the Workshop instructor). You will see the non RUM Online Boutique running.</p><p><a href=#R-image-c6c1c20c035d69ca2b1cb49bf5fbbe31 class=lightbox-link><img src=../../../en/rum/2-setup/../images/online-boutique.png alt="Online Boutique" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c6c1c20c035d69ca2b1cb49bf5fbbe31><img src=../../../en/rum/2-setup/../images/online-boutique.png alt="Online Boutique" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>In Chrome & Firefox or Microsoft Edge you can right click on the Online-Boutique site, you will have an option to <strong>&ldquo;View Page Source&rdquo;</strong></p><p><a href=#R-image-4fca89dd1d0642a51dd78fe1c6fe3304 class=lightbox-link><img src=../../../en/rum/2-setup/../images/Chrome-1.png alt=Chrome-see-source class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4fca89dd1d0642a51dd78fe1c6fe3304><img src=../../../en/rum/2-setup/../images/Chrome-1.png alt=Chrome-see-source class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Selecting it will show you the HTML page source code in a separate Tab. The changes for RUM will be placed in the HEAD section of your Web page, Below are the original lines as you should have it in your local Base version. There is no reference to the Splunk or OpenTelemetry Beacon (the function that is used to send RUM Metrics and Traces).</p><p><a href=#R-image-eee16d8944e7fad3cfcccada13c77386 class=lightbox-link><img src=../../../en/rum/2-setup/../images/Chrome-html.png alt=Chrome-see-html class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eee16d8944e7fad3cfcccada13c77386><img src=../../../en/rum/2-setup/../images/Chrome-html.png alt=Chrome-see-html class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><h2 id=2-obtain-rum-access-token>2. Obtain RUM Access Token</h2><p>As this Deployment we are about to do is also used as part of the RUM workshop section, you will need to obtain your RUM Access Token from the Splunk UI. You can find the workshop Access Token by clicking <strong>&#187;</strong> bottom left or the <a href=#R-image-6ce4d0ee1d0e53e9db3b168c3a3ac288 class=lightbox-link><img src="../../../en/rum/2-setup/../images/setting.png?classes=inline&height=25px" alt=settings class="figure-image noborder inline lightbox noshadow" style=height:25px;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6ce4d0ee1d0e53e9db3b168c3a3ac288><img src="../../../en/rum/2-setup/../images/setting.png?classes=inline&height=25px" alt=settings class="lightbox-image noborder inline lightbox noshadow" loading=lazy></a> menu option and then selecting <strong>Settings â†’ Access Tokens</strong>.</p><p>Expand the RUM workshop token that your host has instructed you to use e.g. <strong>O11y-Workshop-RUM-TOKEN</strong>, then click on <strong>Show Token</strong> to expose your token. Click the
<span class="btn cstyle grey"><button type=button>
Copy</button></span> button to copy to clipboard. Please do not use the <strong>Default</strong> token! Make sure the token has RUM as its Authorization Scope.</p><p><a href=#R-image-13cb479fcfb30ff52d26dccda9e76948 class=lightbox-link><img src=../../../en/rum/2-setup/../images/RUM-Access-Token.png alt="Access Token" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-13cb479fcfb30ff52d26dccda9e76948><img src=../../../en/rum/2-setup/../images/RUM-Access-Token.png alt="Access Token" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Please do not attempt to create your own token</div><div class=box-content><p>We have created a RUM Token specifically for this workshop with the appropriate settings for the exercises you will be performing</p></div></div><p>Create the <code>RUM_TOKEN</code> environment variable to use in the proceeding shell script to personalize your deployment.</p><div class=tab-panel data-tab-group=e32dcbdc92e2098a2166fbe969b8039b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=export-variables class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("e32dcbdc92e2098a2166fbe969b8039b","export-variables")'>
<span class=tab-nav-text>Export Variables</span></button></div><div class=tab-content-container><div data-tab-item=export-variables class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>RUM_TOKEN</span><span class=o>=</span>&lt;replace_with_O11y-Workshop-RUM-TOKEN&gt;</span></span></code></pre></div></div></div></div></div><h2 id=3-removing-existing-deployment>3. Removing existing deployment</h2><p>If you have deployed the Online Boutique as part of the APM session, you will need to remove the existing deployment before you can deploy the RUM enabled version.</p><div class=tab-panel data-tab-group=9f4f62a9513b8a2bc06989663c06af91><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=remove-existing-deployment class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("9f4f62a9513b8a2bc06989663c06af91","remove-existing-deployment")'>
<span class=tab-nav-text>Remove existing deployment</span></button></div><div class=tab-content-container><div data-tab-item=remove-existing-deployment class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/apm
</span></span><span class=line><span class=cl>kubectl delete -f deployment.yaml</span></span></code></pre></div></div></div></div></div><h2 id=4-deploy-rum-enabled-online-boutique>4. Deploy RUM enabled Online Boutique</h2><p>To deploy the Online Boutique application into K3s, run the apm config script, then apply the deployment:</p><div class=tab-panel data-tab-group=e1a63bdbcf782c6e64ba378328ad0131><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=deploy-rum-enabled-online-boutique class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("e1a63bdbcf782c6e64ba378328ad0131","deploy-rum-enabled-online-boutique")'>
<span class=tab-nav-text>Deploy RUM enabled Online Boutique</span></button>
<button data-tab-item=deployment-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("e1a63bdbcf782c6e64ba378328ad0131","deployment-output")'>
<span class=tab-nav-text>Deployment Output</span></button></div><div class=tab-content-container><div data-tab-item=deploy-rum-enabled-online-boutique class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/apm
</span></span><span class=line><span class=cl>kubectl apply -f deployment.yaml</span></span></code></pre></div></div></div><div data-tab-item=deployment-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>deployment.apps/checkoutservice created
</span></span><span class=line><span class=cl>service/checkoutservice created
</span></span><span class=line><span class=cl>deployment.apps/redis-cart created
</span></span><span class=line><span class=cl>service/redis-cart created
</span></span><span class=line><span class=cl>deployment.apps/productcatalogservice created
</span></span><span class=line><span class=cl>service/productcatalogservice created
</span></span><span class=line><span class=cl>deployment.apps/loadgenerator created
</span></span><span class=line><span class=cl>service/loadgenerator created
</span></span><span class=line><span class=cl>deployment.apps/frontend created
</span></span><span class=line><span class=cl>service/frontend created
</span></span><span class=line><span class=cl>service/frontend-external created
</span></span><span class=line><span class=cl>deployment.apps/paymentservice created
</span></span><span class=line><span class=cl>service/paymentservice created
</span></span><span class=line><span class=cl>deployment.apps/emailservice created
</span></span><span class=line><span class=cl>service/emailservice created
</span></span><span class=line><span class=cl>deployment.apps/adservice created
</span></span><span class=line><span class=cl>service/adservice created
</span></span><span class=line><span class=cl>deployment.apps/cartservice created
</span></span><span class=line><span class=cl>service/cartservice created
</span></span><span class=line><span class=cl>deployment.apps/recommendationservice created
</span></span><span class=line><span class=cl>service/recommendationservice created
</span></span><span class=line><span class=cl>deployment.apps/shippingservice created
</span></span><span class=line><span class=cl>service/shippingservice created
</span></span><span class=line><span class=cl>deployment.apps/currencyservice created
</span></span><span class=line><span class=cl>service/currencyservice created</span></span></code></pre></div></div></div></div></div><h2 id=6--review-the-changes-to-online-boutique>6. Review the changes to Online Boutique</h2><p>The changes needed for RUM are placed in the <code>&lt;head></code> section of the hosts Web page. Below is the updated <code>&lt;head></code> section with the changes required to enable RUM:</p><p><a href=#R-image-a2b98e989bbb5f917a4f0f875b5863a1 class=lightbox-link><img src=../../../en/rum/2-setup/../images/ViewRUM-HEAD-html.png alt="Online Boutique" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a2b98e989bbb5f917a4f0f875b5863a1><img src=../../../en/rum/2-setup/../images/ViewRUM-HEAD-html.png alt="Online Boutique" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>The first three lines (marked in red) have been added to the <code>&lt;head></code> section of the host Web page to enable RUM Tracing, the last three (marked in blue) are optional and used to enable Custom RUM events.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span><span class=nb>window</span><span class=p>.</span><span class=nx>SplunkRum</span> <span class=o>&amp;&amp;</span> <span class=nb>window</span><span class=p>.</span><span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span><span class=nx>beaconUrl</span><span class=o>:</span> <span class=s2>&#34;https://rum-ingest.eu0.signalfx.com/v1/rum&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>rumAuth</span><span class=o>:</span> <span class=s2>&#34;&lt;redacted&gt;&#34;</span><span class=p>,</span> <span class=nx>app</span><span class=o>:</span> <span class=s2>&#34;ksnq-rum-app&#34;</span><span class=p>,</span> <span class=nx>environment</span><span class=o>:</span> <span class=s2>&#34;ksnq-rum-env&#34;</span><span class=p>});&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>Provider</span> <span class=o>=</span> <span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>provider</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>tracer</span><span class=o>=</span><span class=nx>Provider</span><span class=p>.</span><span class=nx>getTracer</span><span class=p>(</span><span class=s1>&#39;appModuleLoader&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div><ul><li>The first part is to indicate where to download the Splunk Open Telemetry Javascript file from: <code>https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js</code> (this can also be hosted locally if so required).</li><li>The second line defines the location where to send the traces to in the beacon url: <code>{beaconUrl: "https://rum-ingest.eu0.signalfx.com/v1/rum"</code></li><li>The Access Token: <code>rumAuth: "&lt;redacted>"</code>.</li><li>Identification tags <code>app</code> and <code>environment</code> to indentify in the SPLUNK RUM UI: <code>app: "ksnq-rum-app", environment: "ksnq-rum-env"}</code></li></ul><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>In this example the app name is <strong>ksnq-rum-app</strong>, this will be different in the Workshop. Check with your host what the app name and environment to use in the RUM session will be and make a note of it!</p></div></div><p>The above two lines are all that is required to enable RUM on your website!</p><p>The (blue) optional section that uses <code>var tracer=Provider.getTracer('appModuleLoader');</code> will add a custom event for every page change allowing you to better track your website conversions and usage.</p><footer class=footline></footer></article></div></main></div><script src=../../../js/clipboard.min.js?1696414015 defer></script>
<script src=../../../js/perfect-scrollbar.min.js?1696414015 defer></script>
<script src=../../../js/theme.js?1696414015 defer></script></body></html>