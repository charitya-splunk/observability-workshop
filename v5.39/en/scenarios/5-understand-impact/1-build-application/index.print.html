<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta name=generator content="Relearn 5.23.2+tip"><meta name=description content="Splunk Observability Workshops"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Build the Sample Application :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="10 minutes Introduction For this workshop, we&rsquo;ll be using a microservices-based application. This application is for an online retailer and normally includes more than a dozen services. However, to keep the workshop simple, we&rsquo;ll be focusing on two services used by the retailer as part of their payment processing workflow: the credit check service and the credit processor service.
Pre-requisites You will start with an EC2 instance and perform some initial steps in order to get to the following state:"><meta property="og:title" content="Build the Sample Application :: Splunk Observability Cloud Workshops"><meta property="og:description" content="10 minutes Introduction For this workshop, we&rsquo;ll be using a microservices-based application. This application is for an online retailer and normally includes more than a dozen services. However, to keep the workshop simple, we&rsquo;ll be focusing on two services used by the retailer as part of their payment processing workflow: the credit check service and the credit processor service.
Pre-requisites You will start with an EC2 instance and perform some initial steps in order to get to the following state:"><meta property="og:type" content="article"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.39/en/scenarios/5-understand-impact/1-build-application/index.html"><meta property="article:section" content="Understand Impact :: Splunk Observability Cloud Workshops"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><title>Build the Sample Application :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v5.39/en/scenarios/5-understand-impact/1-build-application/index.html rel=canonical type=text/html title="Build the Sample Application :: Splunk Observability Cloud Workshops"><link href=../../../../en/scenarios/5-understand-impact/1-build-application/index.xml rel=alternate type=application/rss+xml title="Build the Sample Application :: Splunk Observability Cloud Workshops"><link href=../../../../images/favicon.ico?1707220482 rel=icon type=image/x-icon sizes=any><link href=../../../../css/fontawesome-all.min.css?1707220489 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fontawesome-all.min.css?1707220489 rel=stylesheet></noscript><link href=../../../../css/nucleus.css?1707220489 rel=stylesheet><link href=../../../../css/auto-complete.css?1707220489 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/auto-complete.css?1707220489 rel=stylesheet></noscript><link href=../../../../css/perfect-scrollbar.min.css?1707220489 rel=stylesheet><link href=../../../../css/fonts.css?1707220489 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fonts.css?1707220489 rel=stylesheet></noscript><link href=../../../../css/theme.css?1707220489 rel=stylesheet><link href=../../../../css/theme-splunk-light.css?1707220489 rel=stylesheet id=R-variant-style><link href=../../../../css/variant.css?1707220489 rel=stylesheet><link href=../../../../css/print.css?1707220489 rel=stylesheet media=print><link href=../../../../css/format-print.css?1707220489 rel=stylesheet><link href=../../../../css/ie.css?1707220489 rel=stylesheet><script src=../../../../js/url.js?1707220489></script>
<script src=../../../../js/variant.js?1707220489></script>
<script>window.index_js_url="../../../../en/index.search.js";var root_url="../../../../",baseUri=root_url.replace(/\/$/,"");window.relearn=window.relearn||{},window.relearn.baseUriFull="https://splunk.github.io/observability-workshop/v5.39/",window.variants&&variants.init(["splunk-light","splunk-dark"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script>
<script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script>
<script>SplunkRum.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rum",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g",app:"observability-workshop",version:"1",environment:"observability-workshop-env"}),SplunkSessionRecorder.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rumreplay",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g"})</script><style>@media screen and (min-width:1000px){#R-body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1400px;width:100%}}:root{--MENU-WIDTH-L:22.5rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../../en/scenarios/5-understand-impact/1-build-application/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)">
<i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/scenarios/index.html><span itemprop=name>Scenarios</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/scenarios/5-understand-impact/index.html><span itemprop=name>Understand Impact</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Build the Sample Application</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=build-the-sample-application>Build the Sample Application</h1><span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content style=background-color:#ed0090>10 minutes</span></span><h2 id=introduction>Introduction</h2><p>For this workshop, we&rsquo;ll be using a microservices-based application. This application is for an online retailer and normally includes more than a dozen services. However, to keep the workshop simple, we&rsquo;ll be focusing on two services used by the retailer as part of their payment processing workflow: the credit check service and the credit processor service.</p><h2 id=pre-requisites>Pre-requisites</h2><p>You will start with an EC2 instance and perform some <a href=#initial-steps>initial steps</a> in order to get to the following state:</p><ul><li>Install Kubernetes (k3s) and Docker</li><li>Deploy the <strong>Splunk distribution of the OpenTelemetry Collector</strong></li><li>Build and deploy <code>creditcheckservice</code> and <code>creditprocessorservice</code></li><li>Deploy a load generator to send traffic to the services</li></ul><h2 id=initial-steps>Initial Steps</h2><p>The initial setup can be completed by executing the following steps on the command line of your EC2 instance.</p><p>You&rsquo;ll be asked to enter a name for your environment. Please use <code>tagging-workshop-yourname</code> (where <code>yourname</code> is replaced by your actual name).</p><div class="wrap-code highlight"><pre tabindex=0><code>cd workshop/tagging

./1-docker-setup.sh

# Exit and ssh back to this instance

# return to the same directory as before 
cd workshop/tagging

# ensure Docker is running 
sudo systemctl start docker

./2-deploy-otel-collector.sh
./3-deploy-creditcheckservice.sh
./4-deploy-creditprocessorservice.sh
./7-deploy-load-generator.sh</code></pre></div><h2 id=view-your-application-in-splunk-observability-cloud>View your application in Splunk Observability Cloud</h2><p>Now that the setup is complete, let&rsquo;s confirm that it&rsquo;s sending data to <strong>Splunk Observability Cloud</strong>. Note that when the application is deployed for the first time, it may take a few minutes for the data to appear.</p><p>Navigate to APM, then use the Environment dropdown to select your environment (i.e. <code>tagging-workshop-name</code>).</p><p>If everything was deployed correctly, you should see <code>creditprocessorservice</code> and <code>creditcheckservice</code> displayed in the list of services:</p><p><a href=#R-image-0b75eeeb03ccfb1c535844c17b925337 class=lightbox-link><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/apm_overview.png alt="APM Overview" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0b75eeeb03ccfb1c535844c17b925337><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/apm_overview.png alt="APM Overview" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Click on <strong>Explore</strong> on the right-hand side to view the service map. We can see that the <code>creditcheckservice</code> makes calls to the <code>creditprocessorservice</code>, with an average response time of at least 3 seconds:</p><p><a href=#R-image-1653aaa611d3ba3d2aa8e42203e38e54 class=lightbox-link><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/service_map.png alt="Service Map" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1653aaa611d3ba3d2aa8e42203e38e54><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/service_map.png alt="Service Map" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Next, click on <strong>Traces</strong> on the right-hand side to see the traces captured for this application. You&rsquo;ll see that some traces run relatively fast (i.e. just a few milliseconds), whereas others take a few seconds.</p><p><a href=#R-image-3e7d4701b2f88bf88c2ad4df68aec3f6 class=lightbox-link><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/traces.png alt=Traces class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3e7d4701b2f88bf88c2ad4df68aec3f6><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/traces.png alt=Traces class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>If you toggle <strong>Errors only</strong> to <code>on</code>, you&rsquo;ll also notice that some traces have errors:</p><p><a href=#R-image-fe775c2f83035f9a24c26b14ade1f4e1 class=lightbox-link><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/traces_with_errors.png alt=Traces class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fe775c2f83035f9a24c26b14ade1f4e1><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/traces_with_errors.png alt=Traces class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Toggle <strong>Errors only</strong> back to <code>off</code> and sort the traces by duration, then click on one of the longer running traces. In this example, the trace took five seconds, and we can see that most of the time was spent calling the <code>/runCreditCheck</code> operation, which is part of the <code>creditprocessorservice</code>.</p><p><a href=#R-image-103b63a2bd89b29e907ed418191c0cc3 class=lightbox-link><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/long_running_trace.png alt="Long Running Trace" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-103b63a2bd89b29e907ed418191c0cc3><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/long_running_trace.png alt="Long Running Trace" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Currently, we don&rsquo;t have enough details in our traces to understand why some requests finish in a few milliseconds, and others take several seconds. To provide the best possible customer experience, this will be critical for us to understand.</p><p>We also don&rsquo;t have enough information to understand why some requests result in errors, and others don&rsquo;t. For example, if we look at one of the error traces, we can see that the error occurs when the <code>creditprocessorservice</code> attempts to call another service named <code>otherservice</code>. But why do some requests results in a call to <code>otherservice</code>, and others don&rsquo;t?</p><p><a href=#R-image-9fbe992e4e011397b1b66afbec660fce class=lightbox-link><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/error_trace.png alt="Trace with Errors" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9fbe992e4e011397b1b66afbec660fce><img src=../../../../en/scenarios/5-understand-impact/1-build-application/../images/error_trace.png alt="Trace with Errors" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>We&rsquo;ll explore these questions and more in the workshop.</p><footer class=footline></footer></article></div></main></div><script src=../../../../js/clipboard.min.js?1707220491 defer></script>
<script src=../../../../js/perfect-scrollbar.min.js?1707220491 defer></script>
<script src=../../../../js/theme.js?1707220491 defer></script></body></html>