<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.125.5"><meta name=generator content="Relearn 6.0.0+tip"><meta name=description content='1. Patching the Payment Service Finally, we will patch the paymentservice deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the paymentservice service in APM.
kubectl patch deployment opentelemetry-demo-paymentservice -n otel-demo -p &#39;{"spec": {"template":{"metadata":{"annotations":{"instrumentation.opentelemetry.io/inject-nodejs":"default/splunk-otel-collector"}}}} }&#39;This will cause the opentelemetry-demo-paymentservice pod to restart and after a few minutes, you should see the paymentservice service in APM.'><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Zero Configuration - Payment Service :: Splunk Observability Cloud Workshops"><meta name=twitter:description content='1. Patching the Payment Service Finally, we will patch the paymentservice deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the paymentservice service in APM.
kubectl patch deployment opentelemetry-demo-paymentservice -n otel-demo -p &#39;{"spec": {"template":{"metadata":{"annotations":{"instrumentation.opentelemetry.io/inject-nodejs":"default/splunk-otel-collector"}}}} }&#39;This will cause the opentelemetry-demo-paymentservice pod to restart and after a few minutes, you should see the paymentservice service in APM.'><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.61/en/other/3-auto-instrumentation/2-nodejs/4-payment-service/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Zero Configuration - Payment Service :: Splunk Observability Cloud Workshops"><meta property="og:description" content='1. Patching the Payment Service Finally, we will patch the paymentservice deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the paymentservice service in APM.
kubectl patch deployment opentelemetry-demo-paymentservice -n otel-demo -p &#39;{"spec": {"template":{"metadata":{"annotations":{"instrumentation.opentelemetry.io/inject-nodejs":"default/splunk-otel-collector"}}}} }&#39;This will cause the opentelemetry-demo-paymentservice pod to restart and after a few minutes, you should see the paymentservice service in APM.'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="Ninja Workshops"><meta property="article:modified_time" content="2024-01-04T12:08:09+00:00"><meta itemprop=name content="Zero Configuration - Payment Service :: Splunk Observability Cloud Workshops"><meta itemprop=description content='1. Patching the Payment Service Finally, we will patch the paymentservice deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the paymentservice service in APM.
kubectl patch deployment opentelemetry-demo-paymentservice -n otel-demo -p &#39;{"spec": {"template":{"metadata":{"annotations":{"instrumentation.opentelemetry.io/inject-nodejs":"default/splunk-otel-collector"}}}} }&#39;This will cause the opentelemetry-demo-paymentservice pod to restart and after a few minutes, you should see the paymentservice service in APM.'><meta itemprop=dateModified content="2024-01-04T12:08:09+00:00"><meta itemprop=wordCount content="62"><title>Zero Configuration - Payment Service :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v5.61/en/other/3-auto-instrumentation/2-nodejs/4-payment-service/index.html rel=canonical type=text/html title="Zero Configuration - Payment Service :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v5.61/images/favicon.ico?1718371329 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v5.61/css/fontawesome-all.min.css?1718371342 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.61/css/fontawesome-all.min.css?1718371342 rel=stylesheet></noscript><link href=/observability-workshop/v5.61/css/nucleus.css?1718371342 rel=stylesheet><link href=/observability-workshop/v5.61/css/auto-complete.css?1718371342 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.61/css/auto-complete.css?1718371342 rel=stylesheet></noscript><link href=/observability-workshop/v5.61/css/perfect-scrollbar.min.css?1718371342 rel=stylesheet><link href=/observability-workshop/v5.61/css/fonts.css?1718371342 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.61/css/fonts.css?1718371342 rel=stylesheet></noscript><link href=/observability-workshop/v5.61/css/theme.css?1718371342 rel=stylesheet><link href=/observability-workshop/v5.61/css/theme-splunk-light.css?1718371342 rel=stylesheet id=R-variant-style><link href=/observability-workshop/v5.61/css/chroma-relearn-light.css?1718371342 rel=stylesheet id=R-variant-chroma-style><link href=/observability-workshop/v5.61/css/variant.css?1718371342 rel=stylesheet><link href=/observability-workshop/v5.61/css/print.css?1718371342 rel=stylesheet media=print><link href=/observability-workshop/v5.61/css/format-print.css?1718371342 rel=stylesheet><script src=/observability-workshop/v5.61/js/variant.js?1718371342></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../../../..",window.relearn.relBaseUri="../../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v5.61",window.index_js_url="/observability-workshop/v5.61/en/index.search.js",window.variants&&variants.init(["splunk-light","splunk-dark"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"eu0",rumAccessToken:"TR9BBfgYo7qJfqrfgqjoqA",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({app:"observability-workshop",realm:"eu0",rumAccessToken:"TR9BBfgYo7qJfqrfgqjoqA"})</script></script><style>:root{--MAIN-WIDTH-MAX:1000rem;--MENU-WIDTH-L:23rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/observability-workshop/v5.61/en/other/3-auto-instrumentation/2-nodejs/4-payment-service/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.61/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.61/en/other/index.html><span itemprop=name>Ninja Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.61/en/other/3-auto-instrumentation/index.html><span itemprop=name>Auto-Instrumentation Workshops</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.61/en/other/3-auto-instrumentation/2-nodejs/index.html><span itemprop=name>NodeJS Zero-Config Workshop</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>4. Payment Service</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.61/en/other/3-auto-instrumentation/2-nodejs/3-frontend-service/index.html title="Zero Configuration - Frontend Service (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.61/en/other/3-auto-instrumentation/2-nodejs/5-profiling/index.html title="Code Profiling - Payment Service (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=zero-configuration---payment-service>Zero Configuration - Payment Service</h1><h2 id=1-patching-the-payment-service>1. Patching the Payment Service</h2><p>Finally, we will patch the <code>paymentservice</code> deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the <code>paymentservice</code> service in <strong>APM</strong>.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl patch deployment opentelemetry-demo-paymentservice -n otel-demo -p <span class=s1>&#39;{&#34;spec&#34;: {&#34;template&#34;:{&#34;metadata&#34;:{&#34;annotations&#34;:{&#34;instrumentation.opentelemetry.io/inject-nodejs&#34;:&#34;default/splunk-otel-collector&#34;}}}} }&#39;</span></span></span></code></pre></div><p>This will cause the <code>opentelemetry-demo-paymentservice</code> pod to restart and after a few minutes, you should see the <code>paymentservice</code> service in <strong>APM</strong>.</p><p><a href=#R-image-c790913aa4a53a736597f9e1513aa406 class=lightbox-link><img alt=Paymentservice class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.61/en/other/3-auto-instrumentation/2-nodejs/4-payment-service/../images/apm-paymentservice.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c790913aa4a53a736597f9e1513aa406><img alt=Paymentservice class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.61/en/other/3-auto-instrumentation/2-nodejs/4-payment-service/../images/apm-paymentservice.png></a></p><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>Robert Castley</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>Jan 4, 2024</span></span></footer></article></div></main></div><script src=/observability-workshop/v5.61/js/clipboard.min.js?1718371342 defer></script><script src=/observability-workshop/v5.61/js/perfect-scrollbar.min.js?1718371342 defer></script><script src=/observability-workshop/v5.61/js/theme.js?1718371342 defer></script></body></html>