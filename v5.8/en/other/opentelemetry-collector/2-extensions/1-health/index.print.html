<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 5.22.1+tip"><meta name=description content="Splunk Observability Workshops"><meta property="og:title" content="OpenTelemetry Collector Extensions"><meta property="og:description" content="Health Check Extensions are configured in the same config.yaml file that we referenced in the installation step. Let&rsquo;s edit the config.yaml file and configure the extensions. Note that the pprof and zpages extensions are already configured in the default config.yaml file. For the purpose of this workshop, we will only be updating the health_check extension to expose the port on all network interfaces on which we can access the health of the collector."><meta property="og:type" content="article"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.8/en/other/opentelemetry-collector/2-extensions/1-health/"><meta property="article:section" content="other"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta name=twitter:card content="summary"><meta name=twitter:title content="OpenTelemetry Collector Extensions"><meta name=twitter:description content="Health Check Extensions are configured in the same config.yaml file that we referenced in the installation step. Let&rsquo;s edit the config.yaml file and configure the extensions. Note that the pprof and zpages extensions are already configured in the default config.yaml file. For the purpose of this workshop, we will only be updating the health_check extension to expose the port on all network interfaces on which we can access the health of the collector."><title>OpenTelemetry Collector Extensions :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v5.8/en/other/opentelemetry-collector/2-extensions/1-health/index.html rel=canonical type=text/html title="OpenTelemetry Collector Extensions :: Splunk Observability Cloud Workshops"><link href=../../../../../en/other/opentelemetry-collector/2-extensions/1-health/index.xml rel=alternate type=application/rss+xml title="OpenTelemetry Collector Extensions :: Splunk Observability Cloud Workshops"><link href=../../../../../images/favicon.ico?1697477632 rel=icon type=image/x-icon sizes=any><link href=../../../../../css/fontawesome-all.min.css?1697477635 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../../css/fontawesome-all.min.css?1697477635 rel=stylesheet></noscript><link href=../../../../../css/nucleus.css?1697477635 rel=stylesheet><link href=../../../../../css/auto-complete.css?1697477635 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../../css/auto-complete.css?1697477635 rel=stylesheet></noscript><link href=../../../../../css/perfect-scrollbar.min.css?1697477635 rel=stylesheet><link href=../../../../../css/fonts.css?1697477635 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../../css/fonts.css?1697477635 rel=stylesheet></noscript><link href=../../../../../css/theme.css?1697477635 rel=stylesheet><link href=../../../../../css/theme-auto.css?1697477635 rel=stylesheet id=R-variant-style><link href=../../../../../css/variant.css?1697477635 rel=stylesheet><link href=../../../../../css/print.css?1697477635 rel=stylesheet media=print><link href=../../../../../css/format-print.css?1697477635 rel=stylesheet><link href=../../../../../css/ie.css?1697477635 rel=stylesheet><script src=../../../../../js/url.js?1697477635></script>
<script src=../../../../../js/variant.js?1697477635></script>
<script>window.index_js_url="../../../../../en/index.search.js";var root_url="../../../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_Reset_view="Reset view",window.T_View_reset="View reset!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://splunk.github.io/observability-workshop/v5.8/",window.variants&&variants.init(["auto","splunk-light","splunk-dark"])</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script>
<script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script>
<script>SplunkRum.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rum",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g",app:"observability-workshop",version:"1",environment:"observability-workshop-env"}),SplunkSessionRecorder.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rumreplay",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g"})</script><style>@media screen and (min-width:1500px){#R-body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1500px;width:100%}}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../../../en/other/opentelemetry-collector/2-extensions/1-health/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)">
<i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../../en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../../en/other/index.html><span itemprop=name>Other Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../../en/other/opentelemetry-collector/index.html><span itemprop=name>Making Your Observability Cloud Native With OpenTelemetry</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../../en/other/opentelemetry-collector/2-extensions/index.html><span itemprop=name>OpenTelemetry Collector Extensions</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>OpenTelemetry Collector Extensions</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><h2 id=health-check>Health Check</h2><p>Extensions are configured in the same <code>config.yaml</code> file that we referenced in the installation step. Let&rsquo;s edit the <code>config.yaml</code> file and configure the extensions. Note that the <strong>pprof</strong> and <strong>zpages</strong> extensions are already configured in the default <code>config.yaml</code> file. For the purpose of this workshop, we will only be updating the <strong>health_check</strong> extension to expose the port on all network interfaces on which we can access the health of the collector.</p><div class=tab-panel data-tab-group=63ccabfbf80178213c7544df26ea35d0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("63ccabfbf80178213c7544df26ea35d0","command")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vi /etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=0414c0ec374a99806fdbc598ff67a359><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=extensions-configuration class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("0414c0ec374a99806fdbc598ff67a359","extensions-configuration")'>
<span class=tab-nav-text>Extensions Configuration</span></button></div><div class=tab-content-container><div data-tab-item=extensions-configuration class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span></span></span></code></pre></div></div></div></div></div><p>Start the collector:</p><div class=tab-panel data-tab-group=bafbe24c66c0dc6a4ce09c496388a7a4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("bafbe24c66c0dc6a4ce09c496388a7a4","command")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>otelcol-contrib --config<span class=o>=</span>file:/etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><p>This extension enables a HTTP URL that can be probed to check the status of the OpenTelemetry Collector. This extension can be used as a liveness and/or readiness probe on Kubernetes. To learn more about the <code>curl</code> command, check out the <a href=https://curl.se/docs/manpage.html target=_blank>curl man page</a>.</p><p>Open a new terminal session and SSH into your instance to run the following command:</p><div class=tab-panel data-tab-group=8311f2cc514bdb2240c8cec1c28ef261><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=curl-command class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("8311f2cc514bdb2240c8cec1c28ef261","curl-command")'>
<span class=tab-nav-text>curl Command</span></button>
<button data-tab-item=curl-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("8311f2cc514bdb2240c8cec1c28ef261","curl-output")'>
<span class=tab-nav-text>curl Output</span></button></div><div class=tab-content-container><div data-tab-item=curl-command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:13133</span></span></code></pre></div></div></div><div data-tab-item=curl-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{&#34;status&#34;:&#34;Server available&#34;,&#34;upSince&#34;:&#34;2023-04-27T10:11:22.153295874+01:00&#34;,&#34;uptime&#34;:&#34;16m24.684476004s&#34;}</span></span></code></pre></div></div></div></div></div><footer class=footline></footer></article></div></main></div><script src=../../../../../js/clipboard.min.js?1697477635 defer></script>
<script src=../../../../../js/perfect-scrollbar.min.js?1697477635 defer></script>
<script src=../../../../../js/theme.js?1697477635 defer></script></body></html>