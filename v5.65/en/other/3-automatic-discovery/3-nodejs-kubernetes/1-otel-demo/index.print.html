<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.125.5"><meta name=generator content="Relearn 6.1.1+tip"><meta name=description content="1. Create a namespace To not conflict with other workshops, we will deploy the OpenTelemetry Demo in a separate namespace called otel-demo. To create the namespace, run the following command:
kubectl create namespace otel-demo2. Deploy the OpenTelemetry Demo Next, change to the directory containing the OpenTelemetry Demo application:
cd ~/workshop/apmDeploy the OpenTelemetry Demo application:
​ Command Output kubectl apply -n otel-demo -f otel-demo.yaml serviceaccount/opentelemetry-demo created service/opentelemetry-demo-adservice created service/opentelemetry-demo-cartservice created service/opentelemetry-demo-checkoutservice created service/opentelemetry-demo-currencyservice created service/opentelemetry-demo-emailservice created service/opentelemetry-demo-featureflagservice created service/opentelemetry-demo-ffspostgres created service/opentelemetry-demo-frontend created service/opentelemetry-demo-kafka created service/opentelemetry-demo-loadgenerator created service/opentelemetry-demo-paymentservice created service/opentelemetry-demo-productcatalogservice created service/opentelemetry-demo-quoteservice created service/opentelemetry-demo-recommendationservice created service/opentelemetry-demo-redis created service/opentelemetry-demo-shippingservice created deployment."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploying the OpenTelemetry Demo :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="1. Create a namespace To not conflict with other workshops, we will deploy the OpenTelemetry Demo in a separate namespace called otel-demo. To create the namespace, run the following command:
kubectl create namespace otel-demo2. Deploy the OpenTelemetry Demo Next, change to the directory containing the OpenTelemetry Demo application:
cd ~/workshop/apmDeploy the OpenTelemetry Demo application:
​ Command Output kubectl apply -n otel-demo -f otel-demo.yaml serviceaccount/opentelemetry-demo created service/opentelemetry-demo-adservice created service/opentelemetry-demo-cartservice created service/opentelemetry-demo-checkoutservice created service/opentelemetry-demo-currencyservice created service/opentelemetry-demo-emailservice created service/opentelemetry-demo-featureflagservice created service/opentelemetry-demo-ffspostgres created service/opentelemetry-demo-frontend created service/opentelemetry-demo-kafka created service/opentelemetry-demo-loadgenerator created service/opentelemetry-demo-paymentservice created service/opentelemetry-demo-productcatalogservice created service/opentelemetry-demo-quoteservice created service/opentelemetry-demo-recommendationservice created service/opentelemetry-demo-redis created service/opentelemetry-demo-shippingservice created deployment."><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.65/en/other/3-automatic-discovery/3-nodejs-kubernetes/1-otel-demo/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Deploying the OpenTelemetry Demo :: Splunk Observability Cloud Workshops"><meta property="og:description" content="1. Create a namespace To not conflict with other workshops, we will deploy the OpenTelemetry Demo in a separate namespace called otel-demo. To create the namespace, run the following command:
kubectl create namespace otel-demo2. Deploy the OpenTelemetry Demo Next, change to the directory containing the OpenTelemetry Demo application:
cd ~/workshop/apmDeploy the OpenTelemetry Demo application:
​ Command Output kubectl apply -n otel-demo -f otel-demo.yaml serviceaccount/opentelemetry-demo created service/opentelemetry-demo-adservice created service/opentelemetry-demo-cartservice created service/opentelemetry-demo-checkoutservice created service/opentelemetry-demo-currencyservice created service/opentelemetry-demo-emailservice created service/opentelemetry-demo-featureflagservice created service/opentelemetry-demo-ffspostgres created service/opentelemetry-demo-frontend created service/opentelemetry-demo-kafka created service/opentelemetry-demo-loadgenerator created service/opentelemetry-demo-paymentservice created service/opentelemetry-demo-productcatalogservice created service/opentelemetry-demo-quoteservice created service/opentelemetry-demo-recommendationservice created service/opentelemetry-demo-redis created service/opentelemetry-demo-shippingservice created deployment."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="Ninja Workshops"><meta property="article:modified_time" content="2024-08-20T15:53:10+01:00"><meta itemprop=name content="Deploying the OpenTelemetry Demo :: Splunk Observability Cloud Workshops"><meta itemprop=description content="1. Create a namespace To not conflict with other workshops, we will deploy the OpenTelemetry Demo in a separate namespace called otel-demo. To create the namespace, run the following command:
kubectl create namespace otel-demo2. Deploy the OpenTelemetry Demo Next, change to the directory containing the OpenTelemetry Demo application:
cd ~/workshop/apmDeploy the OpenTelemetry Demo application:
​ Command Output kubectl apply -n otel-demo -f otel-demo.yaml serviceaccount/opentelemetry-demo created service/opentelemetry-demo-adservice created service/opentelemetry-demo-cartservice created service/opentelemetry-demo-checkoutservice created service/opentelemetry-demo-currencyservice created service/opentelemetry-demo-emailservice created service/opentelemetry-demo-featureflagservice created service/opentelemetry-demo-ffspostgres created service/opentelemetry-demo-frontend created service/opentelemetry-demo-kafka created service/opentelemetry-demo-loadgenerator created service/opentelemetry-demo-paymentservice created service/opentelemetry-demo-productcatalogservice created service/opentelemetry-demo-quoteservice created service/opentelemetry-demo-recommendationservice created service/opentelemetry-demo-redis created service/opentelemetry-demo-shippingservice created deployment."><meta itemprop=dateModified content="2024-08-20T15:53:10+01:00"><meta itemprop=wordCount content="368"><title>Deploying the OpenTelemetry Demo :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v5.65/en/other/3-automatic-discovery/3-nodejs-kubernetes/1-otel-demo/index.html rel=canonical type=text/html title="Deploying the OpenTelemetry Demo :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v5.65/images/favicon.ico?1725615612 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v5.65/css/fontawesome-all.min.css?1725615612 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.65/css/fontawesome-all.min.css?1725615612 rel=stylesheet></noscript><link href=/observability-workshop/v5.65/css/nucleus.css?1725615612 rel=stylesheet><link href=/observability-workshop/v5.65/css/auto-complete.css?1725615612 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.65/css/auto-complete.css?1725615612 rel=stylesheet></noscript><link href=/observability-workshop/v5.65/css/perfect-scrollbar.min.css?1725615612 rel=stylesheet><link href=/observability-workshop/v5.65/css/fonts.css?1725615612 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.65/css/fonts.css?1725615612 rel=stylesheet></noscript><link href=/observability-workshop/v5.65/css/theme.css?1725615612 rel=stylesheet><link href=/observability-workshop/v5.65/css/theme-splunk-light.css?1725615612 rel=stylesheet id=R-variant-style><link href=/observability-workshop/v5.65/css/chroma-relearn-light.css?1725615612 rel=stylesheet id=R-variant-chroma-style><link href=/observability-workshop/v5.65/css/variant.css?1725615612 rel=stylesheet><link href=/observability-workshop/v5.65/css/print.css?1725615612 rel=stylesheet media=print><link href=/observability-workshop/v5.65/css/format-print.css?1725615612 rel=stylesheet><script src=/observability-workshop/v5.65/js/variant.js?1725615612></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../../../..",window.relearn.relBaseUri="../../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v5.65",window.index_js_url="/observability-workshop/v5.65/en/index.search.js?1725615612",window.variants&&variants.init(["splunk-light","splunk-dark"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"eu0",rumAccessToken:"TR9BBfgYo7qJfqrfgqjoqA",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({app:"observability-workshop",realm:"eu0",rumAccessToken:"TR9BBfgYo7qJfqrfgqjoqA"})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/observability-workshop/v5.65/en/other/3-automatic-discovery/3-nodejs-kubernetes/1-otel-demo/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.65/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.65/en/other/index.html><span itemprop=name>Ninja Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.65/en/other/3-automatic-discovery/index.html><span itemprop=name>Automatic Discovery Workshops</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.65/en/other/3-automatic-discovery/3-nodejs-kubernetes/index.html><span itemprop=name>NodeJS Zero-Config Workshop</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>1. Deploy OpenTelemetry Demo</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.65/en/other/3-automatic-discovery/3-nodejs-kubernetes/index.html title="NodeJS Zero-Config Workshop (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.65/en/other/3-automatic-discovery/3-nodejs-kubernetes/2-otel-collector/index.html title="Installing the OpenTelemetry Collector (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=deploying-the-opentelemetry-demo>Deploying the OpenTelemetry Demo</h1><h2 id=1-create-a-namespace>1. Create a namespace</h2><p>To not conflict with other workshops, we will deploy the OpenTelemetry Demo in a separate namespace called <code>otel-demo</code>. To create the namespace, run the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create namespace otel-demo</span></span></code></pre></div><h2 id=2-deploy-the-opentelemetry-demo>2. Deploy the OpenTelemetry Demo</h2><p>Next, change to the directory containing the OpenTelemetry Demo application:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/apm</span></span></code></pre></div><p>Deploy the OpenTelemetry Demo application:</p><div class=tab-panel data-tab-group=f739d2f1aa8e36a7473d58eb054cbfb4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("f739d2f1aa8e36a7473d58eb054cbfb4","command")'>
<span class=tab-nav-text>Command</span>
</button>
<button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("f739d2f1aa8e36a7473d58eb054cbfb4","output")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -n otel-demo -f otel-demo.yaml</span></span></code></pre></div></div></div><div data-tab-item=output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>serviceaccount/opentelemetry-demo created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-adservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-cartservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-checkoutservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-currencyservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-emailservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-featureflagservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-ffspostgres created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-frontend created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-kafka created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-loadgenerator created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-paymentservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-productcatalogservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-quoteservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-recommendationservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-redis created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-shippingservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-accountingservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-adservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-cartservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-checkoutservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-currencyservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-emailservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-featureflagservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-ffspostgres created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-frauddetectionservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-frontend created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-kafka created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-loadgenerator created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-paymentservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-productcatalogservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-quoteservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-recommendationservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-redis created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-shippingservice created</span></span></code></pre></div></div></div></div></div><p>Once the application is deployed, we need to wait for the pods to be in a <code>Running</code> state. To check the status of the pods, run the following command:</p><div class=tab-panel data-tab-group=2299e1d5b25b48ea288e8eca9998fdae><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("2299e1d5b25b48ea288e8eca9998fdae","command")'>
<span class=tab-nav-text>Command</span>
</button>
<button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("2299e1d5b25b48ea288e8eca9998fdae","output")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods -n otel-demo</span></span></code></pre></div></div></div><div data-tab-item=output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                        READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>opentelemetry-demo-emailservice-847d6fb577-bxll6            1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-ffspostgres-55f65465dd-2gsj4             1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-adservice-5b7c68859d-5hx5f               1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-currencyservice-c4cb78446-qsd68          1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-frontend-5d7cdb8786-5dl76                1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-kafka-79868d56d8-62wsd                   1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-paymentservice-5cb4ccc47c-65hxl          1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-productcatalogservice-59d955f9d6-xtnjr   1/1     Running   0          38s
</span></span><span class=line><span class=cl>opentelemetry-demo-loadgenerator-755d6cd5b-r5lqs            1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-quoteservice-5fbfb97778-vm62m            1/1     Running   0          38s
</span></span><span class=line><span class=cl>opentelemetry-demo-redis-57c49b7b5b-b2klr                   1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-shippingservice-6667f69f78-cwj8q         1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-recommendationservice-749f55f9b6-5k4lc   1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-featureflagservice-67677647c-85xtm       1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-checkoutservice-5474bf74b8-2nmns         1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-frauddetectionservice-77fd69d967-lnjcg   1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-accountingservice-96d44cfbc-vmtzb        1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-cartservice-7c4f59bdd5-rfkf4             1/1     Running   0          40s</span></span></code></pre></div></div></div></div></div><h2 id=3-validate-the-application-is-running>3. Validate the application is running</h2><p>To validate the application is running, we will port-forward the frontend service. To do this, run the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl port-forward svc/opentelemetry-demo-frontend 8083:8080 -n otel-demo --address<span class=o>=</span><span class=s1>&#39;0.0.0.0&#39;</span></span></span></code></pre></div><p>Obtain the <strong>public IP address</strong> of the instance you are running on. You can do this by running the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl ifconfig.me</span></span></code></pre></div><p>Once the port-forward is running, you can access the application by opening a browser and navigating to <code>http://&lt;public IP address>:8083</code>. You should see the following:</p><p><a href=#R-image-574268da9fb7a8226b6bad4f0dd8ede7 class=lightbox-link><img alt="OpenTelemetry Demo" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.65/en/other/3-automatic-discovery/3-nodejs-kubernetes/1-otel-demo/../images/otel-demo.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-574268da9fb7a8226b6bad4f0dd8ede7><img alt="OpenTelemetry Demo" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.65/en/other/3-automatic-discovery/3-nodejs-kubernetes/1-otel-demo/../images/otel-demo.png></a></p><p>Once you have confirmed the application is running, you can close the port-forward by pressing <code>ctrl + c</code>.</p><p>Next, we will deploy the <strong>OpenTelemetry Collector</strong>.</p><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>rcastley</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>Aug 20, 2024</span></span></footer></article></div></main></div><script src=/observability-workshop/v5.65/js/clipboard.min.js?1725615612 defer></script><script src=/observability-workshop/v5.65/js/perfect-scrollbar.min.js?1725615612 defer></script><script src=/observability-workshop/v5.65/js/theme.js?1725615612 defer></script></body></html>