<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta name=generator content="Relearn 5.23.2+tip"><meta name=description content="ディメンションとプロパティの比較で、どちらかを使うべきかというのはよく議論されます。"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="ディメンション、プロパティ、タグ :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="ディメンションとプロパティの比較で、どちらかを使うべきかというのはよく議論されます。"><meta property="og:title" content="ディメンション、プロパティ、タグ :: Splunk Observability Cloud Workshops"><meta property="og:description" content="ディメンションとプロパティの比較で、どちらかを使うべきかというのはよく議論されます。"><meta property="og:type" content="article"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.25/ja/resources/dimensions_properties_tags/index.html"><meta property="article:section" content="その他のリソース :: Splunk Observability Cloud Workshops"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><title>ディメンション、プロパティ、タグ :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v5.25/en/resources/dimensions_properties_tags/index.html rel=alternate hreflang=x-default><link href=https://splunk.github.io/observability-workshop/v5.25/en/resources/dimensions_properties_tags/index.html rel=alternate hreflang=en><link href=https://splunk.github.io/observability-workshop/v5.25/ja/resources/dimensions_properties_tags/index.html rel=alternate hreflang=ja><link href=https://splunk.github.io/observability-workshop/v5.25/ja/resources/dimensions_properties_tags/index.html rel=canonical type=text/html title="ディメンション、プロパティ、タグ :: Splunk Observability Cloud Workshops"><link href=../../../ja/resources/dimensions_properties_tags/index.xml rel=alternate type=application/rss+xml title="ディメンション、プロパティ、タグ :: Splunk Observability Cloud Workshops"><link href=../../../images/favicon.ico?1701435161 rel=icon type=image/x-icon sizes=any><link href=../../../css/fontawesome-all.min.css?1701435162 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fontawesome-all.min.css?1701435162 rel=stylesheet></noscript><link href=../../../css/nucleus.css?1701435162 rel=stylesheet><link href=../../../css/auto-complete.css?1701435162 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/auto-complete.css?1701435162 rel=stylesheet></noscript><link href=../../../css/perfect-scrollbar.min.css?1701435162 rel=stylesheet><link href=../../../css/fonts.css?1701435162 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fonts.css?1701435162 rel=stylesheet></noscript><link href=../../../css/theme.css?1701435162 rel=stylesheet><link href=../../../css/theme-auto.css?1701435162 rel=stylesheet id=R-variant-style><link href=../../../css/variant.css?1701435162 rel=stylesheet><link href=../../../css/print.css?1701435162 rel=stylesheet media=print><link href=../../../css/format-print.css?1701435162 rel=stylesheet><link href=../../../css/ie.css?1701435162 rel=stylesheet><script src=../../../js/url.js?1701435162></script>
<script src=../../../js/variant.js?1701435162></script>
<script>window.index_js_url="../../../ja/index.search.js";var root_url="../../../",baseUri=root_url.replace(/\/$/,"");window.relearn=window.relearn||{},window.relearn.baseUriFull="https://splunk.github.io/observability-workshop/v5.25/",window.variants&&variants.init(["auto","splunk-light","splunk-dark"]),window.T_Copy_to_clipboard=`クリップボードにコピー`,window.T_Copied_to_clipboard=`クリップボードにコピー!`,window.T_Copy_link_to_clipboard=`リンクをクリップボードにコピー`,window.T_Link_copied_to_clipboard=`リンクをクリップボードにコピーしました!`,window.T_Reset_view=`ビューのリセット`,window.T_View_reset=`リセットを見る`,window.T_No_results_found=`"{0}" の結果が見つかりません`,window.T_N_results_found=`"{0}" で {1} 件の結果が見つかりました`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script>
<script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script>
<script>SplunkRum.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rum",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g",app:"observability-workshop",version:"1",environment:"observability-workshop-env"}),SplunkSessionRecorder.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rumreplay",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g"})</script><style>@media screen and (min-width:1000px){#R-body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1000px;width:100%}}:root{--MENU-WIDTH-L:19.75rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../ja/resources/dimensions_properties_tags/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="メニュー (CTRL+ALT+n)">
<i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../ja/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../ja/resources/index.html><span itemprop=name>その他のリソース</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>ディメンション、プロパティ、タグ</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=ディメンションプロパティタグ>ディメンション、プロパティ、タグ</h1><h2 id=メトリクスにコンテキストを与える>メトリクスにコンテキストを与える</h2><p>ディメンションとプロパティの違いや、どちらを使うべきかというのは、よく話題にされます。それぞれの説明から始めるのではなく、私たちがどのように使い、どのように似ているのかを理解してから、それぞれの違いや、なぜどちらかを使うのかの例を見ていくことにしましょう。</p><h2 id=ディメンションとプロパティの類似点>ディメンションとプロパティの類似点</h2><p>最も単純な答えは、ディメンションとプロパティはともに、メトリクスにコンテキスト（状況）を追加するメタデータの <code>key:value</code> ペアであるということです。メトリクス自体は、<code>cpu.utilization</code> のような標準的なインフラストラクチャメトリクスであろうと、API呼び出しの回数のようなカスタムメトリクスであろうと、実際に測定しているものなら全てに当てはまります。</p><p><code>cpu.utilization</code> メトリクスの値が50%であっても、それがどこから来たのかなどのコンテキストを知らなければ、それは単なる数字であり、私たちにとって有用ではありません。少なくとも、どのホストから来たのかを知る必要があります。</p><p>現在では、個々のホストのパフォーマンスや利用率よりも、クラスターやデータセンター全体のパフォーマンスや利用率をより気にすることが多く、ホストのクラスター全体の平均 <code>cpu.utilization</code>、あるホストの <code>cpu.utilization</code> が同じサービスを実行する他のホストと比べて外れ値である場合、あるいは環境間での平均 <code>cpu.utilization</code> を比較することに興味を持っています。</p><p>このように <code>cpu.utilization</code> メトリクスをスライス、集約、またはグループ化するためには、受け取る <code>cpu.utilization</code> メトリクスのメタデータに、ホストが属するクラスター、ホスト上で実行されているサービス、およびそれが属する環境などの情報が必要です。このメタデータは、ディメンションまたはプロパティの <code>key:value</code> ペアの形で存在することができます。</p><p>例えば、ダッシュボードでフィルターを適用したり、分析関数を実行する際にグループ化機能を使用したりするとき、プロパティまたはディメンションを使用することができます。</p><h2 id=ではディメンションとプロパティはどう違うの>では、ディメンションとプロパティはどう違うの？</h2><p>ディメンションはメトリクスと共に取り込み時に送信されるのに対し、プロパティは取り込み後にメトリクスやディメンションに適用されます。これは、`cpu.utilization`` の値がどのホストから来ているかのような、データポイント（メトリクスの単一の報告値）をユニークにするために必要なメタデータはディメンションでなければならないことを意味します。メトリクス名 + ディメンションは MTS（メトリクスの時間系列）をユニークに定義します。</p><p>例：特定のホスト（server1）によって送信される <code>cpu.utilization</code> メトリクスで、ディメンション <code>host:server1</code> があれば、それはユニークな時間系列と見なされます。もし 10 台のサーバーがそのメトリクスを送信していれば、メトリクス名 <code>cpu.utilization</code> を共有し、ディメンションのキー値ペア（host:server1, host:server2&mldr;host:server10）でユニークに識別される 10 の時間系列があります。</p><p>しかし、サーバー名がデータセンター内でのみユニークである場合、データセンターの場所を示す 2 番目のディメンション dc を追加する必要があります。これにより、可能な MTS の数は倍になります。受信された <code>cpu.utilization</code> メトリクスは、2 組のディメンションのキー値ペアによってユニークに識別されます。</p><p><code>cpu.utilization</code> に <code>dc:east</code> と <code>host:server1</code> を加えたものは、<code>cpu.utilization</code> に <code>dc:west</code> と <code>host:server1</code> を加えたものとは異なる時間系列を作り出します。</p><h2 id=ディメンションは不変だがプロパティは可変である>ディメンションは不変だが、プロパティは可変である</h2><p>上記で述べたように、メトリクス名 + ディメンションの組み合わせで、ユニークな MTS を作ります。したがって、ディメンションの値が変わると、メトリクス名 + ディメンション値の新しいユニークな組み合わせが生まれ、新しい MTS が作成されます。</p><p>一方、プロパティはメトリクス（またはディメンション）が取り込まれた後に適用されます。メトリクスにプロパティを適用すると、そのメトリクスが属するすべての MTS に伝播して適用されます。または、ディメンションにプロパティを適用する場合、例えば <code>host:server1</code> とすると、そのホストからのすべてのメトリクスにそのプロパティが添付されます。プロパティの値を変更すると、そのプロパティが添付されているすべての MTS のプロパティ値が更新されます。これが重要な理由は何でしょうか？ プロパティの歴史的な値にこだわる場合、それをディメンションにする必要があることを意味しています。</p><p>例：私たちはアプリケーションに関するカスタムメトリクスを収集しています。1つのメトリクスは <code>latency</code> で、アプリケーションへのリクエストのレイテンシーをカウントします。顧客ごとにレイテンシーを分類して比較できるように <code>customer</code> ディメンションを持っています。私たちは、顧客が使用しているバージョン別にアプリケーションの <code>latency</code> を分類して比較したいと考え、プロパティ <code>version</code> を <code>customer</code> ディメンションに添付しました。最初はすべての顧客がアプリケーションバージョン1を使用しているので、<code>version:1</code> です。</p><p>現在、いくつかの顧客がアプリケーションのバージョン2を使用しているため、それらの顧客に対してプロパティを <code>version:2</code> に更新します。これらの顧客の <code>version</code> プロパティの値を更新すると、その顧客に関連するすべての MTS に伝播します。これにより、これらの顧客が以前に <code>version:1</code> を使用していたという歴史が失われるため、歴史的な期間にわたって <code>version:1</code> と <code>version:2</code> の <code>latency</code> を比較する場合、正確なデータを得ることはできません。この場合、メトリクスの時間系列をユニークにするためにアプリケーションの <code>version</code> が必要ではないかもしれませんが、歴史的な値にこだわるために <code>version</code> をディメンションにする必要があります。</p><h2 id=結局いつディメンションじゃなくてプロパティを使うの>結局、いつ、ディメンションじゃなくてプロパティを使うの？</h2><p>メトリクスに添付したいメタデータがあるが、取り込み時にはそれを知らない場合が第一の理由です。第二の理由は、ベストプラクティスとして、ディメンションである必要がなければ、それをプロパティにすることです。なぜでしょうか？</p><p>一つの理由は、現在、分析ジョブやチャートレンダリングあたりの MTS の上限が 5K であり、ディメンションが多いほど多くの MTS を生成することです。プロパティは完全に自由形式であり、MTS の数を増やすことなく、メトリクスやディメンションに必要な情報を追加することができます。</p><p>ディメンションは各データポイントと共に送信されるため、ディメンションが多いほど、より多くのデータを送信することになります。これは、クラウドプロバイダーがデータ転送に料金を請求する場合、コストが高くなる可能性があります。</p><p>プロパティを使う良い例としては、ホスト情報の追加などがあります。 <code>machine_type</code>, <code>processor</code>, <code>os</code> などの情報を確認することが重要ですが、これらをディメンションとして設定し、各ホストからのすべてのメトリクスと共に送信するのではなく、プロパティとして設定し、ホストディメンションに添付することができます。</p><p>例えば <code>host:server1</code> では、プロパティ <code>machine_type:ucs</code>, <code>processor:xeon-5560</code>, <code>os:rhel71</code> を設定します。<code>host:server1</code> というディメンションを持つメトリクスが入ってくるたびに、上記のすべてのプロパティが自動的に適用されます。</p><p>プロパティの使用例としては、各サービスのエスカレーション連絡先や、各顧客の SLA レベルを知りたい場合があります。これらの項目は、メトリクスをユニークに識別するために必要ではなく、歴史的な値にも関心がないため、プロパティにすることができます。プロパティはサービスディメンションや顧客ディメンションに追加され、これらのディメンションを持つすべてのメトリクスや MTS に適用されます。</p><h2 id=タグについてはどうですか>タグについてはどうですか？</h2><p>タグは、メトリクスにコンテキストを与えたり整理するのに使われる、メタデータの 3 番目のタイプです。ディメンションやプロパティとは異なり、タグは <code>key:value</code> ペアではありません。タグはラベルやキーワードとして考えることができます。プロパティと同様に、タグは取り込み後に UI の Catalog や API を通じてプログラム的にデータに適用されます。タグはメトリクス、ディメンション、ディテクターなどの他のオブジェクトに適用することができます。</p><h2 id=タグを使う場面はどこですか>タグを使う場面はどこですか？</h2><p>タグが必要とされるのは、タグとオブジェクトの間に多対一の関係がある場合や、タグとそれに適用されるオブジェクト間に一対多の関係がある場合です。本質的に関連していないメトリクスをまとめるのに役立ちます。</p><p>例として、複数のアプリケーションを実行しているホストがある場合です。各アプリケーションに対してタグ（ラベル）を作成し、それぞれのホストに複数のタグを適用して、その上で実行されているアプリケーションをラベル付けします。</p><p>例：Server1 は 3 つのアプリケーションを実行しています。タグ <code>app1</code>, <code>app2</code>, <code>app3</code> を作成し、ディメンション <code>host:server1</code> にこれら 3 つのタグをすべて適用します。</p><p>上記の例を拡張すると、アプリケーションからのメトリクスも収集しているとします。作成したタグを、アプリケーション自体から来るメトリクスに適用することができます。タグに基づいてフィルタリングすることで、アプリケーションに基づいてフィルタリングしながら、アプリケーションと関連するホストメトリクスの全体像を得ることができます。</p><p>例：App1 は <code>service:application1</code> というディメンションでメトリクスを送信します。<code>service:application1</code> のディメンションにタグ <code>app1</code> を適用します。その後、チャートやダッシュボードでタグ <code>app1</code> でフィルタリングすることができます。</p><p>タグの他の使用例には、単一の可能な値を持つ二進状態があります。例として、カナリアテストを行い、カナリアデプロイを行った際に新しいコードを受け取ったホストをマークして、新しいコードを受け取らなかったホストとのパフォーマンスを比較しやすくすることがあります。単一の値 <code>canary</code> しかないため、<code>key:value</code> ペアは必要ありません。</p><p>ただし、タグでフィルタリングはできますが、groupBy 関数では使用できないことに注意してください。groupBy 関数は <code>key:value</code> ペアのキー部分を指定して実行され、そのキーの値に基づいて結果がグループ化されます。</p><h2 id=さらなる情報>さらなる情報</h2><p>カスタムメトリクスのディメンションを送信する方法に関する情報については、お使いのライブラリに関するクライアントライブラリのドキュメントをご覧ください。</p><p>API を通じてメトリクスやディメンションにプロパティやタグを適用する方法については、 <code>/metric/:name</code>、<code>/dimension/:key/:value</code> に関する API ドキュメントを参照してください。</p><p>UI のメタデータカタログでプロパティやタグを追加または編集する方法については、<a href=https://docs.splunk.com/Observability/metrics-and-metadata/metrics-finder-metadata-catalog.html#use-the-metadata-catalog target=_blank>Search the Metric Finder and Metadata catalog</a>で、<strong>​Add or edit metadata</strong> セクションをご覧ください。</p><footer class=footline></footer></article></div></main></div><script src=../../../js/clipboard.min.js?1701435162 defer></script>
<script src=../../../js/perfect-scrollbar.min.js?1701435162 defer></script>
<script src=../../../js/theme.js?1701435162 defer></script></body></html>