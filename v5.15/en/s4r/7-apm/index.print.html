<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta name=generator content="Relearn 5.23.2+tip"><meta name=description content="Splunk Observability Workshops"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Splunk APM :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Splunk Observability Workshops"><meta property="og:title" content="Splunk APM :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Splunk Observability Workshops"><meta property="og:type" content="website"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.15/en/s4r/7-apm/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><title>Splunk APM :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v5.15/en/s4r/7-apm/index.html rel=canonical type=text/html title="Splunk APM :: Splunk Observability Cloud Workshops"><link href=../../../en/s4r/7-apm/index.xml rel=alternate type=application/rss+xml title="Splunk APM :: Splunk Observability Cloud Workshops"><link href=../../../images/favicon.ico?1700184032 rel=icon type=image/x-icon sizes=any><link href=../../../css/fontawesome-all.min.css?1700184036 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fontawesome-all.min.css?1700184036 rel=stylesheet></noscript><link href=../../../css/nucleus.css?1700184036 rel=stylesheet><link href=../../../css/auto-complete.css?1700184036 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/auto-complete.css?1700184036 rel=stylesheet></noscript><link href=../../../css/perfect-scrollbar.min.css?1700184036 rel=stylesheet><link href=../../../css/fonts.css?1700184036 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fonts.css?1700184036 rel=stylesheet></noscript><link href=../../../css/theme.css?1700184036 rel=stylesheet><link href=../../../css/theme-auto.css?1700184036 rel=stylesheet id=R-variant-style><link href=../../../css/variant.css?1700184036 rel=stylesheet><link href=../../../css/print.css?1700184036 rel=stylesheet media=print><link href=../../../css/format-print.css?1700184036 rel=stylesheet><link href=../../../css/ie.css?1700184036 rel=stylesheet><script src=../../../js/url.js?1700184036></script>
<script src=../../../js/variant.js?1700184036></script>
<script>window.index_js_url="../../../en/index.search.js";var root_url="../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_Reset_view="Reset view",window.T_View_reset="View reset!",window.T_No_results_found="No results found for \"{0}\"",window.T_N_results_found="{1} results found for \"{0}\"",baseUriFull="https://splunk.github.io/observability-workshop/v5.15/",window.variants&&variants.init(["auto","splunk-light","splunk-dark"])</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script>
<script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script>
<script>SplunkRum.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rum",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g",app:"observability-workshop",version:"1",environment:"observability-workshop-env"}),SplunkSessionRecorder.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rumreplay",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g"})</script><style>@media screen and (min-width:1000px){#R-body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1000px;width:100%}}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../en/s4r/7-apm/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)">
<i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../en/s4r/index.html><span itemprop=name>Splunk4Rookies - Observability</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Splunk APM</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 7</div><h1 id=splunk-apm>Splunk APM</h1><p>Discover the power of full end-to-end visibility by jumping from a RUM trace (frontend) to an APM trace (backend). All the services are sending telemetry (traces and spans) that Splunk Observability Cloud can visualize, analyze and use to detect anomalies and errors.</p><p>RUM and APM are two sides of the same coin. RUM is the client-side view of the application and APM is the server-side view. In this section, we will use APM to drilldown and identify where the problem is.</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Splunk APM</h1><article class=default><header class=headline></header><h1 id=1-apm-overview>1. APM Overview</h1><p>The service map displays the dependencies and connections among your instrumented and inferred services in APM. The map is dynamically generated based on your selections in the time range, environment, workflow, service, and tag filters.</p><p>When we clicked on the APM link in the RUM waterfall, filters were automatically added to the service map view to show the services that were involved in that particular trace.</p><p>You can use the service map to identify dependencies, performance bottlenecks, and error propagation. To get a complete overview of the application click on <strong>Overview</strong> button on the top left of the service map.</p><p><a href=#R-image-9e0e303584b8e592a5d28cbd8fe8d43c class=lightbox-link><img src=../../../en/s4r/7-apm/1-apm-overview/../images/apm-overview.png alt="APM Explore" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9e0e303584b8e592a5d28cbd8fe8d43c><img src=../../../en/s4r/7-apm/1-apm-overview/../images/apm-overview.png alt="APM Explore" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>The Overview page provides a high-level view of the health of your application. It includes a summary of the services, latency and errors in your application. It also includes a list of the top services by error rate and the top business workflows by error rate (a business workflow is the start-to-finish journey of the collection of traces associated with a given activity or transaction and enables monitoring of end-to-end KPIs and identifying root causes and bottlenecks).</p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>What can you conclude from the <strong>Top Services by Error Rate</strong> chart?</li></ul></div></div><p>If you scroll down the Overview Page you will notice some services listed have <strong>Inferred Service</strong> next to them.</p><p>Splunk APM can infer the presence of the remote service, or inferred service if the span calling the remote service has the necessary information. Examples of possible inferred services include databases, HTTP endpoints, and message queues. Inferred services are not instrumented, but they are displayed on the service map and the service list.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=2-apm-explore>2. APM Explore</h1><p>From the Overview Page, click on <strong>Explore</strong> on the top right of the page. You will be presented with the full service map which now includes all services (including inferred services). Inferred services are visually represented by a dotted outline.</p><p><a href=#R-image-cff5a41d70788629b51ad01c48325dea class=lightbox-link><img src=../../../en/s4r/7-apm/2-apm-explore/../images/apm-explore.png alt="APM Explore" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cff5a41d70788629b51ad01c48325dea><img src=../../../en/s4r/7-apm/2-apm-explore/../images/apm-explore.png alt="APM Explore" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>How many services are there in total?</li><li>Click on the <strong>mysql:LxvGChW075</strong> inferred database.</li><li>Scroll down the right side functions pane, and under <strong>Database Query Performance</strong> click on the top entry. This will take you to the <strong>Database Query Performance</strong> page. Read our <a href=https://docs.splunk.com/observability/en/apm/db-query-perf/db-query-performance.html target=_blank><strong>Database Query performance docs</strong></a> for more in-depth information.</li></ul></div></div><div class="box notices cstyle default"><div class=box-label>Info</div><div class=box-content><p>Note about the <strong>Database Query Performance</strong> page</p></div></div><p><a href=#R-image-84bd4dc73299505b23137d50820cb7df class=lightbox-link><img src=../../../en/s4r/7-apm/2-apm-explore/../images/apm-db-query.png alt="APM DB Query Performance" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-84bd4dc73299505b23137d50820cb7df><img src=../../../en/s4r/7-apm/2-apm-explore/../images/apm-db-query.png alt="APM DB Query Performance" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>Click the browser back button to return to the Service Map.</li><li>In the Service Map hover over the <strong>paymentservice</strong>. What can you conclude from the popup service chart?</li></ul></div></div><p><a href=#R-image-d4a44e972efaac42637c9c1747187edb class=lightbox-link><img src=../../../en/s4r/7-apm/2-apm-explore/../images/apm-service-popup-chart.png alt="APM Service Chart" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d4a44e972efaac42637c9c1747187edb><img src=../../../en/s4r/7-apm/2-apm-explore/../images/apm-service-popup-chart.png alt="APM Service Chart" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>We need to understand if there is a pattern to this error rate. We have a handy tool for that: Tag Spotlight.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=3-apm-service-dashboard>3. APM Service Dashboard</h1><p>To view &mldr;. WIP IPW WIP</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=4-apm-tag-spotlight>4. APM Tag Spotlight</h1><p>To view the tags for the <strong>paymentservice</strong> click on the <strong>paymentservice</strong> and then click on <strong>Tag Spotlight</strong> in the right side functions pane. Once in <strong>Tag Spotlight</strong> ensure the toggle <strong>Show tags with no values</strong> is off.</p><p>There are two views available in <strong>Tag Spotlight</strong>. The default is <strong>Request/Errors</strong> and the other is <strong>Latency</strong>.</p><p>Request/Error charts display the total number of requests, errors, and root cause errors. The Latency charts display p50, p90, and p99 latency. These values are based on Troubleshooting MetricSets (TMS), which Splunk APM generates for every indexed span tag. These are known as RED metrics (request, error, and duration).</p><p><a href=#R-image-0ea2663b370538b045c9f05c03d159d3 class=lightbox-link><img src=../../../en/s4r/7-apm/4-apm-tag-spotlight/../images/apm-tag-spotlight.png alt="APM Tag Spotlight" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0ea2663b370538b045c9f05c03d159d3><img src=../../../en/s4r/7-apm/4-apm-tag-spotlight/../images/apm-tag-spotlight.png alt="APM Tag Spotlight" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>What can you conclude from the data you are seeing?</li><li>Which chart helped you come to this conclusion?</li></ul></div></div><p><a href=#R-image-031c5c7c8c3901ddff0df74b5f9a17ba class=lightbox-link><img src=../../../en/s4r/7-apm/4-apm-tag-spotlight/../images/apm-version-tag.png alt="APM Version Tag" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-031c5c7c8c3901ddff0df74b5f9a17ba><img src=../../../en/s4r/7-apm/4-apm-tag-spotlight/../images/apm-version-tag.png alt="APM Version Tag" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Now that we have identified the version of the <strong>paymentservice</strong> that is causing the issue, let&rsquo;s see if we can find out more information about the error. Click on <strong>← Tag Spotlight</strong> at the top of the page to get back to the Service Map.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=5-apm-service-breakdown>5. APM Service Breakdown</h1><p>From the service map view, click on <strong>paymentservice</strong> to select it. You can use the Breakdown selector to break the service down by any indexed span tag.</p><p>More story here &mldr;</p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>In the right-hand pane there is a button
<span class="btn cstyle grey"><button type=button>
Breakdown</button>
</span>. Click on this button to view the tags the service can be broken down by.</li><li>Select <code>tenant.level</code>.</li><li>What can you conclude from what you are seeing?</li><li>Click on <strong>gold</strong> to select it.</li><li>Click on
<span class="btn cstyle grey"><button type=button>
Breakdown</button></span> and select <code>version</code>.</li><li>Repeat this for <strong>silver</strong> and <strong>bronze</strong>.</li><li>What can you conclude from what you are seeing?</li></ul></div></div><p>You will now see the <strong>paymentservice</strong> broken down by <code>tenant.level</code> and each tenant broken down by <code>version</code>. You can see that the <strong>paymentservice</strong> is broken down into three services <strong>gold</strong>, <strong>silver</strong> and <strong>bronze</strong>. Each tenant is broken down into two services, one for each version (<code>v350.10</code> and <code>v350.9</code>).</p><p><a href=#R-image-5c55ccbb184d20e6721a686f7ae45447 class=lightbox-link><img src=../../../en/s4r/7-apm/5-apm-service-breakdown/../images/apm-service-breakdown.png alt="APM Service Breakdown" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5c55ccbb184d20e6721a686f7ae45447><img src=../../../en/s4r/7-apm/5-apm-service-breakdown/../images/apm-service-breakdown.png alt="APM Service Breakdown" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>Click on any one of the red dotted lines coming from the <strong>checkoutservice</strong> to <code>v350.10</code>.</li><li>Take a look at the <strong>Service-to-Service Requests & Errors</strong> chart.</li><li>What percentage of errors are there?</li></ul></div></div><p>Using span tags to break down services is a very powerful feature. It allows you to see how your services are performing for different customers, different versions, different regions, etc. In this exercise, we have determined that <code>v350.10</code> of the <strong>paymentservice</strong> is causing problems for our customers.</p><p>Next, we need to drill down into a trace to see what is going on.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=6-apm-trace-analyzer>6. APM Trace Analyzer</h1><ol><li>Click on traces</li><li>Click on Group traces by and select version</li><li>Click on elipsis next to v350.10 and click add to filter.</li><li>Sort traces by duration</li><li>Select the 1st trace ensuring it has a long duration</li></ol><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=7-apm-waterfall>7. APM Waterfall</h1><ol><li>What can you conclude is going on from the waterfall? (Answer multiple attempts)</li><li>Verify version is <strong>v350.10</strong> by looking at the metadata under tags.</li><li>Conclusion &mldr; we have a problem.</li><li>Draw attention to related content &mldr; TBC</li><li>Click on Logs for trace XXXXXXX</li></ol><footer class=footline></footer></article></section></div></main></div><script src=../../../js/clipboard.min.js?1700184036 defer></script>
<script src=../../../js/perfect-scrollbar.min.js?1700184036 defer></script>
<script src=../../../js/theme.js?1700184036 defer></script></body></html>