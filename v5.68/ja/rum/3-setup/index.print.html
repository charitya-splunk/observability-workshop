<!doctype html><html lang=ja dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.125.5"><meta name=generator content="Relearn 6.4.0+tip"><meta name=description content="ブラウザでOnline BoutiqueのウェブページのオリジナルのHEADセクション（またはここにある例を使用）をチェックします ワークショッ"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="3. 自分のWebサイトでRUMを有効化する場合の例 :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="ブラウザでOnline BoutiqueのウェブページのオリジナルのHEADセクション（またはここにある例を使用）をチェックします ワークショッ"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.68/ja/rum/3-setup/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="3. 自分のWebサイトでRUMを有効化する場合の例 :: Splunk Observability Cloud Workshops"><meta property="og:description" content="ブラウザでOnline BoutiqueのウェブページのオリジナルのHEADセクション（またはここにある例を使用）をチェックします ワークショッ"><meta property="og:locale" content="ja"><meta property="og:type" content="article"><meta property="article:section" content="Splunk RUM"><meta property="article:modified_time" content="2023-10-12T10:57:52+01:00"><meta itemprop=name content="3. 自分のWebサイトでRUMを有効化する場合の例 :: Splunk Observability Cloud Workshops"><meta itemprop=description content="ブラウザでOnline BoutiqueのウェブページのオリジナルのHEADセクション（またはここにある例を使用）をチェックします ワークショッ"><meta itemprop=dateModified content="2023-10-12T10:57:52+01:00"><meta itemprop=wordCount content="2910"><title>3. 自分のWebサイトでRUMを有効化する場合の例 :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v5.68/ja/rum/3-setup/index.html rel=canonical type=text/html title="3. 自分のWebサイトでRUMを有効化する場合の例 :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v5.68/images/favicon.ico?1727454588 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v5.68/css/fontawesome-all.min.css?1727454588 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.68/css/fontawesome-all.min.css?1727454588 rel=stylesheet></noscript><link href=/observability-workshop/v5.68/css/nucleus.css?1727454588 rel=stylesheet><link href=/observability-workshop/v5.68/css/auto-complete.css?1727454588 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.68/css/auto-complete.css?1727454588 rel=stylesheet></noscript><link href=/observability-workshop/v5.68/css/perfect-scrollbar.min.css?1727454588 rel=stylesheet><link href=/observability-workshop/v5.68/css/fonts.css?1727454588 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.68/css/fonts.css?1727454588 rel=stylesheet></noscript><link href=/observability-workshop/v5.68/css/theme.css?1727454588 rel=stylesheet><link href=/observability-workshop/v5.68/css/theme-splunk-light.css?1727454588 rel=stylesheet id=R-variant-style><link href=/observability-workshop/v5.68/css/chroma-relearn-light.css?1727454588 rel=stylesheet id=R-variant-chroma-style><link href=/observability-workshop/v5.68/css/variant.css?1727454588 rel=stylesheet><link href=/observability-workshop/v5.68/css/print.css?1727454588 rel=stylesheet media=print><link href=/observability-workshop/v5.68/css/format-print.css?1727454588 rel=stylesheet><script src=/observability-workshop/v5.68/js/variant.js?1727454588></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v5.68",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.index_js_url="/observability-workshop/v5.68/ja/index.search.js?1727454588",window.variants&&variants.init(["splunk-light","splunk-dark"]),window.T_Copy_to_clipboard=`クリップボードにコピー`,window.T_Copied_to_clipboard=`クリップボードにコピー!`,window.T_Copy_link_to_clipboard=`リンクをクリップボードにコピー`,window.T_Link_copied_to_clipboard=`リンクをクリップボードにコピーしました!`,window.T_Reset_view=`ビューのリセット`,window.T_View_reset=`リセットを見る`,window.T_No_results_found=`"{0}" の結果が見つかりません`,window.T_N_results_found=`"{0}" で {1} 件の結果が見つかりました`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"dp3FKraOS_wVhe-l7eCOsA",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({app:"observability-workshop",realm:"us1",rumAccessToken:"dp3FKraOS_wVhe-l7eCOsA"})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/observability-workshop/v5.68/ja/rum/3-setup/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="メニュー (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.68/ja/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.68/ja/rum/index.html><span itemprop=name>Splunk RUM</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>3. 自分のWebサイトでRUMを使う</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.68/ja/rum/2-showcase/index.html title="2. Online BoutiqueでのRUMの利用例 (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.68/ja/rum/4-rum-landing/index.html title="4. RUMランディングページの確認 (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=3-自分のwebサイトでrumを有効化する場合の例>3. 自分のWebサイトでRUMを有効化する場合の例</h1><ul><li>ブラウザでOnline BoutiqueのウェブページのオリジナルのHEADセクション（またはここにある例を使用）をチェックします</li><li>ワークショップ Online Boutique の Webアドレスを検索します</li><li>Online Boutiqueに加えられた変更を確認します</li></ul><hr><h2 id=1-rumなしのonline-boutiqueのオリジナルコードを確認する>1. RUMなしのOnline Boutiqueのオリジナルコードを確認する</h2><p>APMセッションの一部でEC2インスタンスにOnline Boutiqueをインストールしていれば、ポート番号81でサイトにアクセスできます。</p><p>Online BoutiqueがインストールされたEC2インスタンスにアクセスできない場合は、講師からRUMがインストールされていないOnline BoutiqueのURLを教えてもらい、次のステップに進んでください。</p><h2 id=2-rum-access-tokenの入手>2. RUM Access Tokenの入手</h2><p>これから行うデプロイメントは、RUM ワークショップセクションの一部としても使用されます。Splunk UIからRUM Access Tokenを取得する必要があります。ワークショップのアクセストークンは、左下の <strong>&#187;</strong> をクリックし <a href=#R-image-9d2df82082ebd03c7af29a40ce508d2e class=lightbox-link><img alt=settings class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/setting.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9d2df82082ebd03c7af29a40ce508d2e><img alt=settings class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/setting.png></a> メニューをクリックして、 <strong>Settings → Access Tokens</strong> を選択すると見つけることができます。</p><p>講師が使用するように指示したRUMワークショップトークン（例： <strong>O11y-Workshop-RUM-TOKEN</strong> ）を展開し、 <strong>Show Token</strong> をクリックしてトークンを公開します。 <span class="btn cstyle grey"><span><span class=title>Copy</span></span></span> ボタンをクリックし、クリップボードにコピーしてください。 <strong>Default</strong> のトークンは使用しないでください。トークンのAuthorization ScopeがRUMであることを確認してください。</p><p><a href=#R-image-f2ba0d7a12bed5d059789144999f878f class=lightbox-link><img alt="Access Token" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/RUM-Access-Token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f2ba0d7a12bed5d059789144999f878f><img alt="Access Token" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/RUM-Access-Token.png></a></p><div class="box notices cstyle default" style=--VARIABLE-BOX-color:warning><div class=box-label>新規にトークンを作らないでください</div><div class=box-content><p>このワークショップのために、皆さんが行う演習に適した設定をしたRUM Tokenを作成しています。</p></div></div><p>EC2にSSHアクセスしているシェルスクリプトで環境変数 <code>RUM_TOKEN</code> を作成し、デプロイメントをパーソナライズします。</p><div class=tab-panel data-tab-group=b3f3d970808157efdc8a5fca5ff02a34><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=export-variables class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b3f3d970808157efdc8a5fca5ff02a34","export-variables")'>
<span class=tab-nav-text>Export Variables</span></button></div><div class=tab-content-container><div data-tab-item=export-variables class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>RUM_TOKEN</span><span class=o>=</span>&lt;replace_with_O11y-Workshop-RUM-TOKEN&gt;</span></span></code></pre></div></div></div></div></div><h2 id=2-online-boutiqueのデプロイ>2. Online Boutiqueのデプロイ</h2><p>Online BoutiqueアプリケーションをK3sにデプロイするには、apm configスクリプトを実行し、デプロイを適用してください。</p><div class=tab-panel data-tab-group=e8e3cbafb2f52606134770bae73a64fa><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=deploy-online-boutique class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e8e3cbafb2f52606134770bae73a64fa","deploy-online-boutique")'>
<span class=tab-nav-text>Deploy Online Boutique</span>
</button>
<button data-tab-item=deployment-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("e8e3cbafb2f52606134770bae73a64fa","deployment-output")'>
<span class=tab-nav-text>Deployment Output</span></button></div><div class=tab-content-container><div data-tab-item=deploy-online-boutique class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/apm
</span></span><span class=line><span class=cl>kubectl apply -f deployment.yaml</span></span></code></pre></div></div></div><div data-tab-item=deployment-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>deployment.apps/checkoutservice created
</span></span><span class=line><span class=cl>service/checkoutservice created
</span></span><span class=line><span class=cl>deployment.apps/redis-cart created
</span></span><span class=line><span class=cl>service/redis-cart created
</span></span><span class=line><span class=cl>deployment.apps/productcatalogservice created
</span></span><span class=line><span class=cl>service/productcatalogservice created
</span></span><span class=line><span class=cl>deployment.apps/loadgenerator created
</span></span><span class=line><span class=cl>service/loadgenerator created
</span></span><span class=line><span class=cl>deployment.apps/frontend created
</span></span><span class=line><span class=cl>service/frontend created
</span></span><span class=line><span class=cl>service/frontend-external created
</span></span><span class=line><span class=cl>deployment.apps/paymentservice created
</span></span><span class=line><span class=cl>service/paymentservice created
</span></span><span class=line><span class=cl>deployment.apps/emailservice created
</span></span><span class=line><span class=cl>service/emailservice created
</span></span><span class=line><span class=cl>deployment.apps/adservice created
</span></span><span class=line><span class=cl>service/adservice created
</span></span><span class=line><span class=cl>deployment.apps/cartservice created
</span></span><span class=line><span class=cl>service/cartservice created
</span></span><span class=line><span class=cl>deployment.apps/recommendationservice created
</span></span><span class=line><span class=cl>service/recommendationservice created
</span></span><span class=line><span class=cl>deployment.apps/shippingservice created
</span></span><span class=line><span class=cl>service/shippingservice created
</span></span><span class=line><span class=cl>deployment.apps/currencyservice created
</span></span><span class=line><span class=cl>service/currencyservice created</span></span></code></pre></div></div></div></div></div><div class="box notices cstyle default" style=--VARIABLE-BOX-color:warning><div class=box-label>変数未セットに関するメッセージが表示された場合</div><div class=box-content><p><strong>kubectl delete -f deployment.yaml</strong> コマンドを実行しAPM環境のデプロイ削除します。
次にガイド、メッセージに表示されていた変数をexportし上記のデプロイスクリプトを再実行します。</p></div></div><p>ウェブブラウザーを起動し、Online Boutiqueにアクセスします。 (以前使用したもの、または新しくワークショップ講師が提供したもの）。RUMなしのOnline Boutiqueが起動していることが確認できます。</p><p><a href=#R-image-8713a91dc54cce5892b1c78b3b159009 class=lightbox-link><img alt="Online Boutique" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/online-boutique.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8713a91dc54cce5892b1c78b3b159009><img alt="Online Boutique" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/online-boutique.png></a></p><p>下記のお使いのブラウザの説明に従ってください。</p><h3 id=11-chrome-firefox--microsoft-edge-ユーザー---ページのソースを確認>1.1 Chrome, FireFox & Microsoft Edge ユーザー - ページのソースを確認</h3><p>Chrome、Firefox、Microsoft Edgeでは、Online Boutiqueのサイト上で右クリックすると、 <strong>「ページのソースを表示」</strong> のオプションが表示されます。</p><p><a href=#R-image-fd9c978da1e95ff46d79f6215c3320e4 class=lightbox-link><img alt=Chrome-see-source class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Chrome-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fd9c978da1e95ff46d79f6215c3320e4><img alt=Chrome-see-source class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Chrome-1.png></a></p><p>これを選択すると、HTMLページのソースコードが別のタブで表示されます。</p><p><a href=#R-image-ae3d99c59837e83b71b2cb7066e18a12 class=lightbox-link><img alt=Chrome-see-html class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Chrome-html.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ae3d99c59837e83b71b2cb7066e18a12><img alt=Chrome-see-html class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Chrome-html.png></a></p><p>成功すれば、 <a href=/observability-workshop/v5.68/ja/rum/3-setup/index.html#2---変更前のheadセクションの確認>2 - 変更前のHEADセクションの確認</a> へ進みます。</p><h3 id=12-safari-ユーザー---ページのソースを確認>1.2 Safari ユーザー - ページのソースを確認</h3><p>Safariでは機能を有効化する必要がある場合があります。OS Xメニューバーの <em>Safari</em> の配下にある <strong>「設定」</strong> をクリックします。</p><p><a href=#R-image-4207c4f8bb3ac65710fbe515e486ff78 class=lightbox-link><img alt=Safari-1 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Safari-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4207c4f8bb3ac65710fbe515e486ff78><img alt=Safari-1 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Safari-1.png></a></p><p>ダイアログがポップアップしますので、 <strong>「詳細」</strong> ペイン内の <strong>「メニューバーに"開発"メニューを表示」</strong> にチェックをいれ、ダイアログボックスを閉じます。</p><p><a href=#R-image-f0f4ecc54496c855a8200508883839fe class=lightbox-link><img alt=Safari-2 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Safari-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f0f4ecc54496c855a8200508883839fe><img alt=Safari-2 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Safari-2.png></a></p><p>Online Boutiqueを右クリックすると、「ページのソースを表示する」オプションが表示されるようになります。</p><p><a href=#R-image-00dbfd7c7e04544ed84897100ca93691 class=lightbox-link><img alt=Safari-3 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Safari-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-00dbfd7c7e04544ed84897100ca93691><img alt=Safari-3 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Safari-3.png></a></p><p>Online Boutiqueでそのオプションを選択すると、以下のようなHTMLソースコードが表示されます。</p><p><a href=#R-image-88b10d549890ca0305f56f121e060e2b class=lightbox-link><img alt=Safari-html class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Safari-html.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-88b10d549890ca0305f56f121e060e2b><img alt=Safari-html class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/Safari-html.png></a></p><p>成功すれば、 <a href=/observability-workshop/v5.68/ja/rum/3-setup/index.html#2---変更前のheadセクションの確認>2 - 変更前のHEADセクションの確認</a> へ進みます。</p><h3 id=13-internet-explorer-ユーザー---ページのソースを確認>1.3 Internet Explorer ユーザー - ページのソースを確認</h3><p>Internet Explorer 11 をお使いの場合、この演習では Web/RUM 用のSplunk Open Telemetry JavaScriptの特定のバージョンが必要になるため、問題が発生する可能性があります。
ただし、Online Boutiqueサイトを右クリックすると、<strong>「ソースを表示」</strong> のオプションが表示され、必要な変更を確認することができます。</p><p><a href=#R-image-2bb89ad8fc9dfcbbcb7a43a5efb02e53 class=lightbox-link><img alt=IE-1 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/IE-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2bb89ad8fc9dfcbbcb7a43a5efb02e53><img alt=IE-1 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/IE-1.png></a></p><p>Online Boutiqueでそのオプションを選択すると、以下のようなHTMLソースコードが表示されます。</p><p><a href=#R-image-c6436b9ce357bf7fc5d7972694051b5c class=lightbox-link><img alt=IE-2 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/IE-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c6436b9ce357bf7fc5d7972694051b5c><img alt=IE-2 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/IE-2.png></a></p><h2 id=2---変更前のheadセクションの確認>2 - 変更前のHEADセクションの確認</h2><p>RUMのための変更は、WebページのHEADセクションで実施します。以下は、あなたのローカルのBaseバージョンにあるべきオリジナルの行です。</p><p><a href=#R-image-c35f36615276363b9554e058e53e7de0 class=lightbox-link><img alt="Online Boutique" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/ViewBase-HEAD-html.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c35f36615276363b9554e058e53e7de0><img alt="Online Boutique" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/ViewBase-HEAD-html.png></a></p><p>Splunk または Open Telemetry Beacon (RUM Metrics と Traces を送信するために使用される関数) への参照はありません。</p><h2 id=3-rum有効online-boutiqueのウェブurlを探す>3. RUM有効Online Boutiqueのウェブ（URL）を探す</h2><p>RUMで使用するOnline Boutiqueは、RUM有効インスタンスのIPアドレスの81番ポートで見ることができます。URLはワークショップの講師から提供されます。</p><p>このRUMのセッションでは、講師が用意したRUM有効Online Boutiqueにアクセスできます。新しいウェブブラウザを開き、 <code>http://{==RUM-HOST-EC2-IP==}:81/</code> にアクセスすると、RUM有効Online Boutiqueが動作しているのが見えます。ここでも、前のセクションで説明したように、HTMLページのソースを表示します。</p><h2 id=4-rumを有効にするために行った変更をheadセクションで確認>4. RUMを有効にするために行った変更をHEADセクションで確認</h2><p>RUMに必要な変更は、WebページのHEADセクションに配置されます。以下は、RUMを有効にするために必要な変更を加えたhostsの更新されたHEADセクションです。</p><p><a href=#R-image-a08ab89b0b6f6077e7577582c9c446bc class=lightbox-link><img alt="Online Boutique" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/ViewRUM-HEAD-html.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a08ab89b0b6f6077e7577582c9c446bc><img alt="Online Boutique" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.68/ja/rum/3-setup/../images/ViewRUM-HEAD-html.png></a></p><p>最初の3行（赤色でマーク）は、RUMトレースを有効にするためにWebページのHEADセクションに追加されています。最後の3行（青色でマーク）はオプションで、カスタムRUMイベントを有効にするために使用します。</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span><span class=nb>window</span><span class=p>.</span><span class=nx>SplunkRum</span> <span class=o>&amp;&amp;</span> <span class=nb>window</span><span class=p>.</span><span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span><span class=nx>beaconUrl</span><span class=o>:</span> <span class=s2>&#34;https://rum-ingest.eu0.signalfx.com/v1/rum&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>rumAuth</span><span class=o>:</span> <span class=s2>&#34;1wCqZVUWIP5XSdNjPoQRFg&#34;</span><span class=p>,</span> <span class=nx>app</span><span class=o>:</span> <span class=s2>&#34;ksnq-store&#34;</span><span class=p>,</span> <span class=nx>environment</span><span class=o>:</span> <span class=s2>&#34;ksnq-workshop&#34;</span><span class=p>});&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>Provider</span> <span class=o>=</span> <span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>provider</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>tracer</span><span class=o>=</span><span class=nx>Provider</span><span class=p>.</span><span class=nx>getTracer</span><span class=p>(</span><span class=s1>&#39;appModuleLoader&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div><ul><li>最初の行は、Splunk Open Telemetry Javascript ファイルをダウンロードする場所を指定しています。<em><a href=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js rel=external target=_blank>https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js</a></em> (必要であれば、ローカルに読み込むこともできます)</li><li>2行目は、Beacon URLでトレースの送信先を定義しています。 <code>{beaconUrl: "https://rum-ingest.eu0.signalfx.com/v1/rum"</code></li><li>また、Access Tokenを追加しています。 <code>rumAuth: "1wCqZVUWIP5XSdNjPoQRFg"</code> (もちろんこれは例です。全てのアプリケーションに対して、複数のRUM Access Tokenを作成することができます。) *</li><li>また、SPLUNK RUM UIで使用するために、アプリケーション名や環境などの識別タグをRUMトレースに追加するために使用されます。 <code>app: "ksnq-store", environment: "ksnq-workshop"}</code></li></ul><div class="box notices cstyle default" style=--VARIABLE-BOX-color:info><div class=box-label>Info</div><div class=box-content><p>この例ではアプリ名は <strong>ksnq-store</strong> ですが、これはワークショップでは異なるでしょう。RUMセッションで使用するアプリ名と環境は講師に確認し、メモしておいてください。</p></div></div><p>上記の2行だけであなたのWebサイトでRUMを有効にすることができます。</p><p>(青色の)オプションのセクションでは、 <code>var tracer=Provider.getTracer('appModuleLoader');</code> を使用して、すべてのページ変更に対してカスタムイベントを追加し、ウェブサイトのコンバージョンと使用状況をよりよく追跡できるようにします。</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/10/12</span></span></footer></article></div></main></div><script src=/observability-workshop/v5.68/js/clipboard.min.js?1727454588 defer></script><script src=/observability-workshop/v5.68/js/perfect-scrollbar.min.js?1727454588 defer></script><script src=/observability-workshop/v5.68/js/theme.js?1727454588 defer></script></body></html>